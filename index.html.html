<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Decentral Med — Men's Health, Decentralized</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    // ============================================
    // Security: Disable right-click & dev tools shortcuts
    // ============================================
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', function(e) {
      if (e.key === 'F12' || 
          (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
          (e.ctrlKey && e.key === 'U')) {
        e.preventDefault();
      }
    });
  </script>
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --black: #050505;
      --obsidian: #0a0a0a;
      --onyx: #0f0f0f;
      --carbon: #141414;
      --graphite: #1a1a1a;
      --slate: #252525;
      --ash: #333333;
      --smoke: #666666;
      --silver: #999999;
      --pearl: #e5e5e5;
      --white: #ffffff;
      
      /* Orange accent palette */
      --orange-dark: #b34700;
      --orange: #ff6b00;
      --orange-bright: #ff8c33;
      --orange-light: #ffad66;
      --amber: #ffb347;
      --gold: #ffc966;
      
      /* Glossy effects */
      --gloss: linear-gradient(145deg, rgba(255,255,255,0.1) 0%, transparent 50%);
      --shine: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      
      /* Crypto colors */
      --btc: #f7931a;
      --eth: #627eea;
      --sol: #9945ff;
      --usdt: #26a17b;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--black);
      color: var(--pearl);
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Glossy black background effect */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(ellipse at 20% 20%, rgba(255, 107, 0, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(255, 140, 51, 0.05) 0%, transparent 50%),
        linear-gradient(180deg, var(--obsidian) 0%, var(--black) 50%, var(--obsidian) 100%);
      pointer-events: none;
      z-index: -1;
    }

    /* Subtle grid pattern */
    .grid-bg {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        linear-gradient(rgba(255, 107, 0, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 107, 0, 0.02) 1px, transparent 1px);
      background-size: 80px 80px;
      pointer-events: none;
    }

    /* Glowing orbs */
    .glow-orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.15;
      pointer-events: none;
    }

    .glow-orb-1 {
      width: 600px;
      height: 600px;
      background: var(--orange);
      top: -300px;
      right: -200px;
      animation: pulse 12s ease-in-out infinite;
    }

    .glow-orb-2 {
      width: 400px;
      height: 400px;
      background: var(--amber);
      bottom: 10%;
      left: -200px;
      animation: pulse 15s ease-in-out infinite reverse;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.1; transform: scale(1); }
      50% { opacity: 0.2; transform: scale(1.1); }
    }

    /* Snow Animation */
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      font-size: 1rem;
      pointer-events: none;
      opacity: 0.8;
      z-index: 9999;
      animation: fall linear forwards;
    }

    @keyframes fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.8;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Promo Banner */
    .promo-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 50%, #2a2a2a 100%);
      padding: 0.5rem 1rem;
      text-align: center;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--pearl);
      z-index: 101;
      border-bottom: 1px solid var(--slate);
    }

    .promo-banner strong {
      color: var(--orange);
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    /* Navigation */
    nav {
      position: fixed;
      top: 28px;
      left: 0;
      right: 0;
      padding: 0.75rem 4rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      background: transparent;
      backdrop-filter: blur(0px);
      border-bottom: none;
      transition: all 0.3s ease;
    }

    nav.scrolled {
      top: 28px;
      background: rgba(5, 5, 5, 0.98);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 107, 0, 0.1);
      padding: 0.75rem 4rem;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-icon {
      width: 42px;
      height: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .logo-text {
      font-family: 'Syne', sans-serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--white);
      letter-spacing: -0.02em;
    }

    .logo-text span {
      background: linear-gradient(90deg, var(--orange), var(--amber));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-links {
      display: flex;
      gap: 2.5rem;
      list-style: none;
    }

    .nav-links a {
      color: var(--smoke);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--orange);
      transition: width 0.3s ease;
    }

    .nav-links a:hover {
      color: var(--white);
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    .nav-cta {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .cart-btn {
      position: relative;
      background: var(--graphite);
      border: 1px solid var(--slate);
      padding: 0.6rem 0.8rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cart-btn:hover {
      background: var(--slate);
      border-color: var(--orange);
    }

    .cart-btn svg {
      width: 18px;
      height: 18px;
      stroke: var(--pearl);
      fill: none;
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: linear-gradient(135deg, var(--orange) 0%, var(--orange-bright) 100%);
      color: var(--black);
      font-size: 0.65rem;
      font-weight: 700;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 8rem 4rem 6rem;
      position: relative;
    }

    .hero-content {
      max-width: 750px;
      animation: fadeUp 1s ease-out;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: transparent;
      border: none;
      padding: 0.5rem 0;
      font-size: 0.9rem;
      color: var(--orange);
      margin-bottom: 2rem;
      font-weight: 500;
      letter-spacing: 0.03em;
    }

    .hero-badge::before {
      display: none;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .hero h1 {
      font-family: 'Syne', sans-serif;
      font-size: clamp(2.5rem, 6vw, 5rem);
      font-weight: 800;
      line-height: 1.05;
      color: var(--white);
      margin-bottom: 1.5rem;
      letter-spacing: -0.03em;
    }

    .hero h1 .highlight {
      background: linear-gradient(90deg, var(--orange), var(--amber), var(--orange-bright));
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shine 3s linear infinite;
    }

    @keyframes shine {
      to { background-position: 200% center; }
    }

    .hero p {
      font-size: 1.15rem;
      color: var(--silver);
      margin-bottom: 2.5rem;
      max-width: 520px;
      line-height: 1.7;
    }

    .hero-ctas {
      display: flex;
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .btn {
      padding: 1rem 2rem;
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--orange) 0%, var(--orange-bright) 100%);
      color: var(--black);
      font-weight: 700;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(255, 107, 0, 0.4);
    }

    .btn-secondary {
      background: var(--graphite);
      color: var(--pearl);
      border: 1px solid var(--slate);
    }

    .btn-secondary:hover {
      background: var(--slate);
      border-color: var(--orange);
      color: var(--white);
    }

    .crypto-icons {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .crypto-icons span {
      font-size: 0.85rem;
      color: var(--smoke);
      margin-right: 0.5rem;
    }

    .crypto-icon {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      transition: all 0.3s ease;
      position: relative;
    }

    .crypto-icon::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: var(--gloss);
    }

    .crypto-icon:hover {
      transform: scale(1.15) translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .crypto-icon.btc { background: linear-gradient(135deg, var(--btc) 0%, #ffa940 100%); color: white; }
    .crypto-icon.eth { background: linear-gradient(135deg, var(--eth) 0%, #8c9eff 100%); color: white; }
    .crypto-icon.sol { background: linear-gradient(135deg, var(--sol) 0%, #c77dff 100%); color: white; }
    .crypto-icon.usdt { background: linear-gradient(135deg, var(--usdt) 0%, #4cceac 100%); color: white; }

    /* Why Section */
    .why-section {
      padding: 7rem 4rem;
      border-top: 1px solid var(--graphite);
      position: relative;
    }

    .section-header {
      text-align: center;
      margin-bottom: 4rem;
    }

    .section-label {
      font-size: 0.8rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--orange);
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .section-title {
      font-family: 'Syne', sans-serif;
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 700;
      color: var(--white);
    }

    .why-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .why-card {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 1px solid var(--graphite);
      padding: 2.5rem;
      border-radius: 16px;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .why-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--amber));
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .why-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gloss);
      pointer-events: none;
      border-radius: 16px;
    }

    .why-card:hover {
      transform: translateY(-8px);
      border-color: rgba(255, 107, 0, 0.3);
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 107, 0, 0.1);
    }

    .why-card:hover::before {
      opacity: 1;
    }

    .why-icon {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, rgba(255, 107, 0, 0.2), rgba(255, 179, 71, 0.1));
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .why-card h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.75rem;
    }

    .why-card p {
      font-size: 0.95rem;
      color: var(--silver);
      line-height: 1.7;
    }

    /* Quiz Section */
    .quiz-section {
      padding: 5rem 2rem;
      background: linear-gradient(180deg, var(--obsidian) 0%, var(--black) 100%);
    }

    .section-subtitle {
      font-size: 1rem;
      color: var(--silver);
      max-width: 500px;
      margin: 0.5rem auto 0;
    }

    .quiz-container {
      max-width: 700px;
      margin: 0 auto;
    }

    .quiz-card {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 1px solid var(--graphite);
      border-radius: 24px;
      padding: 2.5rem;
    }

    .quiz-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .quiz-step-dot {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--graphite);
      border: 2px solid var(--slate);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--smoke);
      transition: all 0.3s ease;
    }

    .quiz-step-dot.active {
      background: linear-gradient(135deg, var(--orange), var(--amber));
      border-color: var(--orange);
      color: var(--black);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.4);
    }

    .quiz-step-dot.completed {
      background: var(--orange);
      border-color: var(--orange);
      color: var(--black);
    }

    .quiz-step-line {
      width: 40px;
      height: 2px;
      background: var(--slate);
      margin: 0 0.5rem;
    }

    .quiz-slide {
      display: none;
      animation: quizFadeIn 0.4s ease;
    }

    .quiz-slide.active {
      display: block;
    }

    @keyframes quizFadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .quiz-q-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--white);
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .quiz-q-sub {
      color: var(--silver);
      text-align: center;
      margin-bottom: 2rem;
    }

    .quiz-options-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    @media (max-width: 600px) {
      .quiz-options-grid {
        grid-template-columns: 1fr;
      }
    }

    .quiz-opt {
      background: var(--graphite);
      border: 2px solid var(--slate);
      border-radius: 16px;
      padding: 1.5rem 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-opt:hover {
      border-color: var(--orange);
      background: rgba(255, 107, 0, 0.05);
    }

    .quiz-opt.selected {
      border-color: var(--orange);
      background: rgba(255, 107, 0, 0.1);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
    }

    .quiz-opt-icon {
      font-size: 2.5rem;
      display: block;
      margin-bottom: 0.75rem;
    }

    .quiz-opt-label {
      display: block;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .quiz-opt-desc {
      display: block;
      font-size: 0.8rem;
      color: var(--smoke);
    }

    .quiz-nav-btns {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--graphite);
    }

    .quiz-prev-btn, .quiz-next-btn {
      padding: 0.875rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-prev-btn {
      background: var(--graphite);
      border: 1px solid var(--slate);
      color: var(--pearl);
    }

    .quiz-prev-btn:hover {
      background: var(--slate);
    }

    .quiz-next-btn {
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      color: var(--black);
    }

    .quiz-next-btn:hover:not(:disabled) {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
    }

    .quiz-next-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .quiz-results-container {
      text-align: center;
    }

    .quiz-results-header {
      margin-bottom: 2rem;
    }

    .quiz-results-header h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .quiz-rec-card {
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      text-align: left;
    }

    .quiz-rec-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .quiz-rec-icon {
      font-size: 2.5rem;
    }

    .quiz-rec-info h4 {
      font-family: 'Syne', sans-serif;
      color: var(--white);
      margin-bottom: 0.2rem;
    }

    .quiz-rec-info span {
      color: var(--orange);
      font-size: 0.9rem;
    }

    .quiz-rec-reason {
      font-size: 0.9rem;
      color: var(--silver);
      line-height: 1.6;
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--carbon);
      border-radius: 8px;
    }

    .quiz-rec-btn {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      border-radius: 10px;
      color: var(--black);
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-rec-btn:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
    }

    .quiz-restart-btn {
      margin-top: 1.5rem;
      background: none;
      border: none;
      color: var(--smoke);
      cursor: pointer;
      text-decoration: underline;
    }

    /* Bundle Card */
    .quiz-bundle-card {
      background: linear-gradient(145deg, rgba(255, 107, 0, 0.15), rgba(255, 179, 71, 0.08));
      border: 2px solid var(--orange);
      border-radius: 20px;
      padding: 1.75rem;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .quiz-bundle-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--amber), var(--orange));
    }

    .quiz-bundle-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: linear-gradient(135deg, var(--orange), var(--amber));
      color: var(--black);
      font-size: 0.65rem;
      font-weight: 800;
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      letter-spacing: 0.05em;
    }

    .quiz-bundle-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.25rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .quiz-bundle-title h4 {
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .quiz-bundle-title p {
      font-size: 0.85rem;
      color: var(--silver);
    }

    .quiz-bundle-pricing {
      text-align: right;
    }

    .quiz-bundle-original {
      display: block;
      font-size: 0.9rem;
      color: var(--smoke);
      text-decoration: line-through;
    }

    .quiz-bundle-price {
      display: block;
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--white);
    }

    .quiz-bundle-save {
      display: inline-block;
      background: rgba(0, 200, 83, 0.2);
      color: #00e676;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      margin-top: 0.25rem;
    }

    .quiz-bundle-items {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.25rem;
    }

    .quiz-bundle-item {
      background: var(--graphite);
      color: var(--pearl);
      font-size: 0.8rem;
      padding: 0.5rem 0.875rem;
      border-radius: 8px;
      border: 1px solid var(--slate);
    }

    .quiz-bundle-btn {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      border-radius: 12px;
      color: var(--black);
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-bundle-btn:hover {
      box-shadow: 0 8px 30px rgba(255, 107, 0, 0.5);
      transform: translateY(-2px);
    }

    .quiz-bundle-note {
      font-size: 0.75rem;
      color: var(--smoke);
      text-align: center;
      margin-top: 0.75rem;
    }

    .quiz-divider {
      display: flex;
      align-items: center;
      margin: 1.5rem 0;
      color: var(--smoke);
      font-size: 0.85rem;
    }

    .quiz-divider::before,
    .quiz-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--slate);
    }

    .quiz-divider span {
      padding: 0 1rem;
    }

    /* Research Section */
    .research-section {
      padding: 5rem 2rem;
      background: var(--black);
    }

    .research-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    @media (max-width: 600px) {
      .research-grid {
        grid-template-columns: 1fr;
      }
    }

    .research-card {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 1px solid var(--graphite);
      border-radius: 20px;
      padding: 1.75rem;
      transition: all 0.3s ease;
    }

    .research-card:hover {
      border-color: var(--orange);
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .research-card-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .research-icon {
      font-size: 2.5rem;
    }

    .research-drug-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--orange), var(--amber));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--black);
      flex-shrink: 0;
    }

    .research-card-header h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      color: var(--white);
      margin-bottom: 0.2rem;
    }

    .research-card-header p {
      font-size: 0.85rem;
      color: var(--orange);
    }

    .research-stats {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .research-stat {
      flex: 1;
      text-align: center;
      padding: 0.75rem;
      background: rgba(255, 107, 0, 0.1);
      border-radius: 10px;
    }

    .stat-value {
      display: block;
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--orange);
    }

    .stat-label {
      font-size: 0.7rem;
      color: var(--smoke);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .research-bar {
      margin-bottom: 1.25rem;
    }

    .research-bar-label {
      font-size: 0.8rem;
      color: var(--silver);
      margin-bottom: 0.5rem;
    }

    .research-bar-track {
      height: 8px;
      background: var(--graphite);
      border-radius: 4px;
      overflow: hidden;
    }

    .research-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--orange), var(--amber));
      border-radius: 4px;
    }

    .research-text {
      font-size: 0.9rem;
      color: var(--silver);
      line-height: 1.6;
      margin-bottom: 0.75rem;
    }

    .research-source {
      font-size: 0.75rem;
      color: var(--smoke);
      font-style: italic;
    }

    .dive-deeper-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      padding: 0.625rem 1rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 8px;
      color: var(--orange);
      font-size: 0.85rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .dive-deeper-link:hover {
      background: rgba(255, 107, 0, 0.1);
      border-color: var(--orange);
      transform: translateX(5px);
    }

    /* Expandable Deep Dive Section */
    .deep-dive-expand {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease, margin 0.3s ease;
      margin-top: 0;
    }

    .deep-dive-expand.expanded {
      max-height: 2000px;
      margin-top: 1.5rem;
    }

    .deep-dive-expand-content {
      background: var(--carbon);
      border: 1px solid var(--slate);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .deep-dive-expand-content h4 {
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      color: var(--orange);
      margin: 1.25rem 0 0.75rem 0;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--graphite);
    }

    .deep-dive-expand-content h4:first-child {
      margin-top: 0;
    }

    .deep-dive-expand-content p {
      color: var(--silver);
      line-height: 1.7;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
    }

    .deep-dive-expand-content ul {
      list-style: none;
      padding: 0;
      margin: 0.75rem 0;
    }

    .deep-dive-expand-content li {
      position: relative;
      padding-left: 1.5rem;
      margin-bottom: 0.625rem;
      color: var(--silver);
      line-height: 1.6;
      font-size: 0.9rem;
    }

    .deep-dive-expand-content li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--orange);
      font-weight: bold;
    }

    .deep-dive-expand-content li strong {
      color: var(--pearl);
    }

    .deep-dive-sources-inline {
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid var(--graphite);
    }

    .deep-dive-sources-inline h4 {
      border-bottom: none !important;
      margin-bottom: 0.75rem !important;
    }

    .deep-dive-sources-inline p {
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .deep-dive-sources-inline a {
      color: var(--orange);
      text-decoration: none;
    }

    .deep-dive-sources-inline a:hover {
      text-decoration: underline;
    }

    /* Deep Dive Modal */
    .deep-dive-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--black);
      z-index: 2000;
      overflow-y: auto;
      display: none;
    }

    .deep-dive-overlay.active {
      display: block;
    }

    .deep-dive-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
    }

    .deep-dive-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--graphite);
    }

    .deep-dive-title {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .deep-dive-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--orange), var(--amber));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--black);
    }

    .deep-dive-title h1 {
      font-family: 'Syne', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .deep-dive-title p {
      color: var(--orange);
      font-size: 1rem;
    }

    .deep-dive-close {
      background: var(--graphite);
      border: 1px solid var(--slate);
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .deep-dive-close:hover {
      background: var(--slate);
      border-color: var(--orange);
    }

    .deep-dive-close svg {
      width: 20px;
      height: 20px;
      stroke: var(--pearl);
    }

    .deep-dive-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-bottom: 2.5rem;
    }

    @media (max-width: 600px) {
      .deep-dive-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .deep-dive-stat {
      background: var(--carbon);
      border: 1px solid var(--graphite);
      border-radius: 16px;
      padding: 1.25rem;
      text-align: center;
    }

    .deep-dive-stat-value {
      font-family: 'Syne', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--orange);
      margin-bottom: 0.25rem;
    }

    .deep-dive-stat-label {
      font-size: 0.8rem;
      color: var(--smoke);
    }

    .deep-dive-section {
      margin-bottom: 2.5rem;
    }

    .deep-dive-section-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .deep-dive-section-title::before {
      content: '';
      width: 4px;
      height: 24px;
      background: linear-gradient(180deg, var(--orange), var(--amber));
      border-radius: 2px;
    }

    .deep-dive-text {
      font-size: 1rem;
      color: var(--silver);
      line-height: 1.8;
      margin-bottom: 1rem;
    }

    .deep-dive-highlight {
      background: rgba(255, 107, 0, 0.1);
      border-left: 3px solid var(--orange);
      padding: 1.25rem 1.5rem;
      border-radius: 0 12px 12px 0;
      margin: 1.5rem 0;
    }

    .deep-dive-highlight p {
      color: var(--pearl);
      font-size: 1rem;
      line-height: 1.7;
      margin: 0;
    }

    .deep-dive-list {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }

    .deep-dive-list li {
      position: relative;
      padding-left: 1.75rem;
      margin-bottom: 0.875rem;
      color: var(--silver);
      line-height: 1.6;
    }

    .deep-dive-list li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--orange);
      font-weight: bold;
    }

    .deep-dive-comparison {
      background: var(--carbon);
      border: 1px solid var(--graphite);
      border-radius: 16px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .deep-dive-comparison h4 {
      color: var(--white);
      font-size: 1rem;
      margin-bottom: 1.25rem;
    }

    .deep-dive-bar {
      margin-bottom: 1rem;
    }

    .deep-dive-bar-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .deep-dive-bar-header span:first-child {
      color: var(--pearl);
    }

    .deep-dive-bar-header span:last-child {
      color: var(--orange);
      font-weight: 600;
    }

    .deep-dive-bar-track {
      height: 10px;
      background: var(--graphite);
      border-radius: 5px;
      overflow: hidden;
    }

    .deep-dive-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--orange), var(--amber));
      border-radius: 5px;
      transition: width 0.8s ease;
    }

    .deep-dive-sources {
      background: var(--carbon);
      border: 1px solid var(--graphite);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .deep-dive-sources h4 {
      color: var(--white);
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .deep-dive-source-item {
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--graphite);
      font-size: 0.9rem;
    }

    .deep-dive-source-item:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .deep-dive-source-item a {
      color: var(--orange);
      text-decoration: none;
    }

    .deep-dive-source-item a:hover {
      text-decoration: underline;
    }

    .deep-dive-source-item span {
      display: block;
      color: var(--smoke);
      font-size: 0.8rem;
      margin-top: 0.25rem;
    }

    .deep-dive-cta {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid var(--graphite);
    }

    .deep-dive-cta button {
      flex: 1;
      padding: 1rem;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .deep-dive-cta .btn-primary {
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      color: var(--black);
    }

    .deep-dive-cta .btn-primary:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
    }

    .deep-dive-cta .btn-secondary {
      background: var(--graphite);
      border: 1px solid var(--slate);
      color: var(--pearl);
    }

    .deep-dive-cta .btn-secondary:hover {
      background: var(--slate);
    }

    /* Products Section */
    .products-section {
      padding: 7rem 4rem;
      background: linear-gradient(180deg, var(--black) 0%, var(--obsidian) 50%, var(--black) 100%);
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .product-card {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 1px solid var(--graphite);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.4s ease;
      position: relative;
    }

    .product-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gloss);
      pointer-events: none;
      border-radius: 20px;
    }

    .product-card:hover {
      transform: translateY(-10px);
      border-color: rgba(255, 107, 0, 0.4);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.6), 0 0 50px rgba(255, 107, 0, 0.15);
    }

    .product-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      color: var(--black);
      font-size: 0.65rem;
      font-weight: 700;
      padding: 0.4rem 0.8rem;
      border-radius: 50px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      z-index: 2;
    }

    .product-image {
      height: 180px;
      background: var(--carbon);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .product-image::before {
      display: none;
    }

    .pill-icon {
      font-size: 3.5rem;
      opacity: 1;
      filter: grayscale(0);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pill-icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px 16px 0 0;
    }

    .product-info {
      padding: 1.5rem;
      position: relative;
      z-index: 1;
    }

    .product-category {
      font-size: 0.7rem;
      color: var(--orange);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.4rem;
      font-weight: 600;
    }

    .product-name {
      font-family: 'Syne', sans-serif;
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.2rem;
    }

    .product-generic {
      font-size: 0.85rem;
      color: var(--smoke);
      margin-bottom: 0.8rem;
    }

    .product-desc {
      font-size: 0.88rem;
      color: var(--silver);
      margin-bottom: 0.75rem;
      line-height: 1.6;
    }

    .learn-more-link {
      display: inline-block;
      font-size: 0.8rem;
      color: var(--smoke);
      text-decoration: none;
      margin-bottom: 1rem;
      transition: color 0.3s ease;
      border-bottom: 1px solid transparent;
    }

    .learn-more-link:hover {
      color: var(--orange);
      border-bottom-color: var(--orange);
    }

    /* Research card highlight animation */
    .research-card.highlight {
      animation: cardHighlight 2s ease;
    }

    @keyframes cardHighlight {
      0% {
        box-shadow: 0 0 0 0 rgba(255, 107, 0, 0.7);
        border-color: var(--orange);
      }
      50% {
        box-shadow: 0 0 30px 10px rgba(255, 107, 0, 0.3);
        border-color: var(--orange);
      }
      100% {
        box-shadow: none;
        border-color: var(--graphite);
      }
    }

    /* Quiz Modal Styles */
    .quiz-modal {
      max-width: 650px;
    }

    .quiz-progress {
      display: flex;
      gap: 0.5rem;
      padding: 0 2rem;
      margin-bottom: 1rem;
    }

    .quiz-progress-step {
      flex: 1;
      height: 4px;
      background: var(--graphite);
      border-radius: 2px;
      transition: background 0.3s ease;
    }

    .quiz-progress-step.active {
      background: var(--orange);
    }

    .quiz-progress-step.completed {
      background: var(--amber);
    }

    .quiz-question {
      padding: 2rem;
      display: none;
    }

    .quiz-question.active {
      display: block;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .quiz-question-number {
      font-size: 0.75rem;
      color: var(--orange);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.5rem;
    }

    .quiz-question-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.75rem;
      line-height: 1.3;
    }

    .quiz-question-subtitle {
      font-size: 0.9rem;
      color: var(--silver);
      margin-bottom: 1.5rem;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .quiz-option {
      background: var(--graphite);
      border: 2px solid var(--slate);
      border-radius: 12px;
      padding: 1rem 1.25rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .quiz-option:hover {
      border-color: var(--orange);
      background: rgba(255, 107, 0, 0.05);
    }

    .quiz-option.selected {
      border-color: var(--orange);
      background: rgba(255, 107, 0, 0.1);
    }

    .quiz-option-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .quiz-option-content {
      flex: 1;
    }

    .quiz-option-title {
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.2rem;
    }

    .quiz-option-desc {
      font-size: 0.8rem;
      color: var(--smoke);
    }

    .quiz-option-check {
      width: 24px;
      height: 24px;
      border: 2px solid var(--slate);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.3s ease;
    }

    .quiz-option.selected .quiz-option-check {
      background: var(--orange);
      border-color: var(--orange);
    }

    .quiz-option.selected .quiz-option-check::after {
      content: '✓';
      color: var(--black);
      font-weight: bold;
      font-size: 0.8rem;
    }

    .quiz-nav {
      display: flex;
      justify-content: space-between;
      padding: 1.5rem 2rem;
      border-top: 1px solid var(--graphite);
    }

    .quiz-nav-btn {
      padding: 0.875rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .quiz-nav-btn.prev {
      background: var(--graphite);
      border: 1px solid var(--slate);
      color: var(--pearl);
    }

    .quiz-nav-btn.prev:hover {
      background: var(--slate);
    }

    .quiz-nav-btn.next {
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      color: var(--black);
    }

    .quiz-nav-btn.next:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
    }

    .quiz-nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .quiz-nav-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Quiz Results */
    .quiz-results {
      padding: 2rem;
      text-align: center;
    }

    .quiz-results-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes bounceIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .quiz-results-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .quiz-results-subtitle {
      color: var(--silver);
      margin-bottom: 2rem;
    }

    .quiz-recommendation {
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      text-align: left;
    }

    .quiz-recommendation-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .quiz-recommendation-icon {
      font-size: 2.5rem;
    }

    .quiz-recommendation-info h4 {
      font-family: 'Syne', sans-serif;
      font-size: 1.1rem;
      color: var(--white);
      margin-bottom: 0.2rem;
    }

    .quiz-recommendation-info span {
      font-size: 0.85rem;
      color: var(--orange);
    }

    .quiz-recommendation-reason {
      font-size: 0.9rem;
      color: var(--silver);
      line-height: 1.6;
      padding: 1rem;
      background: var(--carbon);
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .quiz-recommendation-stats {
      display: flex;
      gap: 1rem;
    }

    .quiz-stat {
      flex: 1;
      text-align: center;
      padding: 0.75rem;
      background: rgba(255, 107, 0, 0.1);
      border-radius: 8px;
    }

    .quiz-stat-value {
      font-family: 'Syne', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--orange);
    }

    .quiz-stat-label {
      font-size: 0.7rem;
      color: var(--smoke);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .quiz-add-btn {
      width: 100%;
      margin-top: 1rem;
      padding: 1rem;
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      border-radius: 10px;
      color: var(--black);
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-add-btn:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
      transform: translateY(-2px);
    }

    .quiz-restart {
      margin-top: 1.5rem;
      background: none;
      border: none;
      color: var(--smoke);
      font-size: 0.9rem;
      cursor: pointer;
      text-decoration: underline;
    }

    .quiz-restart:hover {
      color: var(--pearl);
    }

    /* Case Study Modal */
    .case-study-modal {
      max-width: 700px;
    }

    .case-study-header {
      text-align: center;
      padding: 2rem 2rem 1rem;
    }

    .case-study-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .case-study-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .case-study-subtitle {
      color: var(--orange);
      font-size: 0.9rem;
    }

    .case-study-content {
      padding: 0 2rem 2rem;
    }

    .case-study-section {
      margin-bottom: 1.5rem;
    }

    .case-study-section-title {
      font-size: 0.75rem;
      color: var(--orange);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .case-study-text {
      font-size: 0.95rem;
      color: var(--silver);
      line-height: 1.7;
    }

    .case-study-stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .case-study-stat {
      background: var(--graphite);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }

    .case-study-stat-value {
      font-family: 'Syne', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--orange);
      margin-bottom: 0.25rem;
    }

    .case-study-stat-label {
      font-size: 0.75rem;
      color: var(--smoke);
    }

    .case-study-comparison {
      background: var(--graphite);
      border-radius: 12px;
      padding: 1.25rem;
      margin: 1rem 0;
    }

    .case-study-comparison-title {
      font-weight: 600;
      color: var(--white);
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .comparison-bar {
      margin-bottom: 0.75rem;
    }

    .comparison-bar-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      margin-bottom: 0.4rem;
    }

    .comparison-bar-label span:first-child {
      color: var(--pearl);
    }

    .comparison-bar-label span:last-child {
      color: var(--orange);
      font-weight: 600;
    }

    .comparison-bar-track {
      height: 8px;
      background: var(--carbon);
      border-radius: 4px;
      overflow: hidden;
    }

    .comparison-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--orange), var(--amber));
      border-radius: 4px;
      transition: width 0.8s ease;
    }

    .case-study-source {
      font-size: 0.75rem;
      color: var(--smoke);
      font-style: italic;
      margin-top: 1rem;
    }

    .case-study-cta {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .case-study-cta button {
      flex: 1;
      padding: 1rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .case-study-cta .btn-primary {
      background: linear-gradient(135deg, var(--orange), var(--orange-bright));
      border: none;
      color: var(--black);
    }

    .case-study-cta .btn-secondary {
      background: var(--graphite);
      border: 1px solid var(--slate);
      color: var(--pearl);
    }

    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* Stylish Dose Selector */
    .dose-selector {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding: 4px;
      background: var(--graphite);
      border-radius: 10px;
      border: 1px solid var(--slate);
    }

    .dose-dropdown-wrapper {
      margin-bottom: 1rem;
    }

    .dose-dropdown {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      color: var(--pearl);
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23ff6b00' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      padding-right: 2.5rem;
    }

    .dose-dropdown:hover {
      border-color: var(--orange);
    }

    .dose-dropdown:focus {
      outline: none;
      border-color: var(--orange);
      box-shadow: 0 0 0 2px rgba(255, 107, 0, 0.2);
    }

    .dose-dropdown option {
      background: var(--carbon);
      color: var(--pearl);
      padding: 0.5rem;
    }

    /* Tadalafil Dose Selector */
    .tadalafil-dose-selector {
      margin-bottom: 1rem;
    }

    .dose-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
      margin-bottom: 6px;
    }

    .dose-row-advanced {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 6px;
    }

    .tadalafil-dose-btn,
    .tadalafil-dose-btn-adv {
      position: relative;
      padding: 0.6rem 0.4rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 8px;
      color: var(--silver);
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.25s ease;
      overflow: hidden;
    }

    .tadalafil-dose-btn span,
    .tadalafil-dose-btn-adv span {
      font-size: 0.65rem;
      font-weight: 500;
      opacity: 0.7;
    }

    .tadalafil-dose-btn:hover,
    .tadalafil-dose-btn-adv:hover {
      border-color: var(--orange);
      color: var(--pearl);
      background: rgba(255, 107, 0, 0.1);
    }

    .tadalafil-dose-btn.active,
    .tadalafil-dose-btn-adv.active {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border-color: var(--orange);
      color: var(--black);
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.35);
    }

    .tadalafil-dose-btn.active span,
    .tadalafil-dose-btn-adv.active span {
      opacity: 1;
    }

    /* Sildenafil Dose Selector */
    .sildenafil-dose-selector {
      margin-bottom: 1rem;
    }

    .dose-row-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .sildenafil-dose-btn {
      position: relative;
      padding: 0.6rem 0.4rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 8px;
      color: var(--silver);
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.25s ease;
      overflow: hidden;
    }

    .sildenafil-dose-btn span {
      font-size: 0.65rem;
      font-weight: 500;
      opacity: 0.7;
    }

    .sildenafil-dose-btn:hover {
      border-color: var(--orange);
      color: var(--pearl);
      background: rgba(255, 107, 0, 0.1);
    }

    .sildenafil-dose-btn.active {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border-color: var(--orange);
      color: var(--black);
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.35);
    }

    .sildenafil-dose-btn.active span {
      opacity: 1;
    }

    /* Minoxidil Dose Selector */
    .minoxidil-dose-selector {
      margin-bottom: 1rem;
    }

    .minoxidil-dose-btn {
      position: relative;
      padding: 0.6rem 0.4rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 8px;
      color: var(--silver);
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.25s ease;
      overflow: hidden;
    }

    .minoxidil-dose-btn span {
      font-size: 0.65rem;
      font-weight: 500;
      opacity: 0.7;
    }

    .minoxidil-dose-btn:hover {
      border-color: var(--orange);
      color: var(--pearl);
      background: rgba(255, 107, 0, 0.1);
    }

    .minoxidil-dose-btn.active {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border-color: var(--orange);
      color: var(--black);
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.35);
    }

    .minoxidil-dose-btn.active span {
      opacity: 1;
    }

    .dose-btn {
      flex: 1;
      padding: 0.6rem 1rem;
      background: transparent;
      border: none;
      border-radius: 8px;
      color: var(--smoke);
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .dose-btn:hover {
      color: var(--pearl);
      background: rgba(255, 107, 0, 0.1);
    }

    .dose-btn.active {
      background: linear-gradient(135deg, var(--orange) 0%, var(--orange-bright) 100%);
      color: var(--black);
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.4);
    }

    .dose-btn.active::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(145deg, rgba(255,255,255,0.2) 0%, transparent 50%);
      border-radius: 8px;
      pointer-events: none;
    }

    .product-price {
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--white);
    }

    .product-price span {
      font-size: 0.8rem;
      font-weight: 400;
      color: var(--smoke);
      font-family: 'Inter', sans-serif;
    }

    .add-to-cart {
      background: linear-gradient(135deg, var(--orange) 0%, var(--orange-bright) 100%);
      border: none;
      width: 46px;
      height: 46px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .add-to-cart::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gloss);
      border-radius: 12px;
    }

    .add-to-cart:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.5);
    }

    .add-to-cart svg {
      width: 20px;
      height: 20px;
      stroke: var(--black);
      fill: none;
      stroke-width: 2.5;
      position: relative;
      z-index: 1;
    }

    /* How It Works */
    .how-section {
      padding: 7rem 4rem;
      border-top: 1px solid var(--graphite);
    }

    .steps-container {
      display: flex;
      justify-content: center;
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    .steps-container::before {
      content: '';
      position: absolute;
      top: 45px;
      left: 20%;
      right: 20%;
      height: 2px;
      background: linear-gradient(90deg, var(--orange), var(--amber), var(--orange));
      opacity: 0.3;
    }

    .step {
      flex: 1;
      text-align: center;
      max-width: 280px;
    }

    .step-number {
      width: 90px;
      height: 90px;
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 2px solid var(--orange);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-family: 'Syne', sans-serif;
      font-size: 2rem;
      font-weight: 800;
      color: var(--orange);
      position: relative;
      z-index: 1;
      box-shadow: 0 0 30px rgba(255, 107, 0, 0.2);
    }

    .step h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.75rem;
    }

    .step p {
      font-size: 0.9rem;
      color: var(--silver);
      line-height: 1.6;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .modal-overlay.active {
      display: flex;
    }

    /* Prevent body scroll when modal is open */
    body.modal-open {
      overflow: hidden;
      position: fixed;
      width: 100%;
      height: 100%;
    }

    .modal {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--obsidian) 100%);
      border: 1px solid var(--graphite);
      border-radius: 24px;
      max-width: 550px;
      width: 95%;
      max-height: 85vh;
      margin-top: 50px;
      overflow-y: auto;
      position: relative;
      overscroll-behavior: contain;
    }

    /* Email Signup Panel */
    .email-signup-panel {
      position: fixed;
      right: -400px;
      top: 50%;
      transform: translateY(-50%);
      width: 360px;
      background: linear-gradient(145deg, var(--carbon) 0%, var(--black) 100%);
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-right: none;
      border-radius: 20px 0 0 20px;
      padding: 2rem;
      z-index: 1000;
      transition: right 0.4s ease;
      box-shadow: -10px 0 40px rgba(0, 0, 0, 0.5);
    }

    .email-signup-panel.active {
      right: 0;
    }

    .email-signup-toggle {
      position: fixed;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border: none;
      border-radius: 10px 0 0 10px;
      padding: 1rem 0.5rem;
      cursor: pointer;
      z-index: 999;
      transition: all 0.3s ease;
      writing-mode: vertical-rl;
      text-orientation: mixed;
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--black);
      letter-spacing: 0.05em;
    }

    .email-signup-toggle:hover {
      padding-right: 0.75rem;
      box-shadow: -5px 0 20px rgba(255, 107, 0, 0.3);
    }

    .email-signup-toggle.hidden {
      display: none;
    }

    .email-signup-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--silver);
      cursor: pointer;
      font-size: 1.25rem;
      transition: color 0.2s ease;
    }

    .email-signup-close:hover {
      color: var(--white);
    }

    .email-signup-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .email-signup-panel h3 {
      font-family: 'Syne', sans-serif;
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .email-signup-panel p {
      color: var(--silver);
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }

    .email-signup-form {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .email-signup-form input {
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      padding: 0.875rem 1rem;
      color: var(--white);
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .email-signup-form input:focus {
      outline: none;
      border-color: var(--orange);
    }

    .email-signup-form input::placeholder {
      color: var(--smoke);
    }

    .email-signup-btn {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border: none;
      border-radius: 10px;
      padding: 0.875rem 1.5rem;
      color: var(--black);
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 0.5rem;
    }

    .email-signup-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.3);
    }

    .email-signup-success {
      text-align: center;
      padding: 1rem 0;
    }

    .email-signup-success .checkmark {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .email-signup-success h4 {
      font-family: 'Syne', sans-serif;
      color: var(--white);
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .email-signup-success p {
      margin-bottom: 0;
    }

    .email-signup-benefits {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1.25rem;
      padding: 0.75rem;
      background: rgba(255, 107, 0, 0.05);
      border-radius: 10px;
    }

    .email-signup-benefit {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8rem;
      color: var(--silver);
    }

    .email-signup-benefit span:first-child {
      color: var(--orange);
    }

    /* Add to Cart Animation */
    .flying-item {
      position: fixed;
      z-index: 9998;
      font-size: 2rem;
      pointer-events: none;
      opacity: 0;
    }

    .flying-item.animate {
      animation: flyToCart 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }

    @keyframes flyToCart {
      0% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
      50% {
        opacity: 1;
        transform: scale(1.3) rotate(15deg) translateY(-50px);
      }
      100% {
        opacity: 0;
        transform: scale(0.3) rotate(30deg);
      }
    }

    /* Cart button pulse when item added */
    .cart-btn.pulse {
      animation: cartPulse 0.5s ease-out;
    }

    @keyframes cartPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); box-shadow: 0 0 20px var(--orange); }
      100% { transform: scale(1); }
    }

    .cart-count.bump {
      animation: countBump 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes countBump {
      0% { transform: scale(1); }
      50% { transform: scale(1.5); }
      100% { transform: scale(1); }
    }

    .modal::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--amber), var(--orange));
      border-radius: 24px 24px 0 0;
    }

    .modal-header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--graphite);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-back {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--graphite);
      border: 1px solid var(--slate);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      color: var(--pearl);
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-back:hover {
      background: var(--slate);
      border-color: var(--orange);
    }

    .modal-back svg {
      width: 16px;
      height: 16px;
      stroke: var(--pearl);
    }

    .modal-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--white);
    }

    .modal-close {
      background: var(--graphite);
      border: 1px solid var(--slate);
      width: 38px;
      height: 38px;
      border-radius: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .modal-close:hover {
      background: var(--slate);
      border-color: var(--orange);
    }

    .modal-close svg {
      width: 18px;
      height: 18px;
      stroke: var(--pearl);
    }

    .modal-body {
      padding: 2rem;
    }

    /* Cart Items */
    .cart-empty {
      text-align: center;
      padding: 3rem;
      color: var(--smoke);
    }

    .cart-item {
      display: flex;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid var(--graphite);
    }

    .cart-item-image {
      width: 60px;
      height: 60px;
      background: var(--graphite);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .cart-item-details {
      flex: 1;
    }

    .cart-item-name {
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .cart-item-price {
      color: var(--smoke);
      font-size: 0.9rem;
    }

    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .qty-btn {
      width: 30px;
      height: 30px;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 8px;
      color: var(--pearl);
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .qty-btn:hover {
      background: var(--slate);
      border-color: var(--orange);
    }

    .cart-item-qty span {
      width: 30px;
      text-align: center;
      color: var(--white);
      font-weight: 600;
    }

    .cart-total {
      padding: 1.5rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid var(--graphite);
      margin-top: 1rem;
    }

    .cart-total-label {
      font-size: 1rem;
      color: var(--smoke);
    }

    .cart-total-amount {
      font-family: 'Syne', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--orange);
    }

    /* Promo Code Section */
    .promo-code-section {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--graphite);
    }

    .promo-input-wrapper {
      display: flex;
      gap: 0.75rem;
    }

    .promo-input-wrapper input {
      flex: 1;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      color: var(--white);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: all 0.3s ease;
    }

    .promo-input-wrapper input:focus {
      outline: none;
      border-color: var(--orange);
    }

    .promo-input-wrapper input::placeholder {
      color: var(--smoke);
      text-transform: none;
      letter-spacing: normal;
    }

    .promo-apply-btn {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border: none;
      border-radius: 10px;
      padding: 0.75rem 1.5rem;
      color: var(--black);
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .promo-apply-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(255, 107, 0, 0.3);
    }

    .promo-message {
      margin-top: 0.75rem;
      font-size: 0.85rem;
      min-height: 1.2rem;
    }

    .promo-message.success {
      color: #22c55e;
    }

    .promo-message.error {
      color: #ef4444;
    }

    .promo-discount-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
      padding: 0.75rem 1rem;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 10px;
      color: #22c55e;
      font-weight: 500;
    }

    /* Customer Form */
    .customer-form {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--graphite);
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-size: 0.85rem;
      color: var(--pearl);
      font-weight: 500;
    }

    .form-group label .required {
      color: var(--orange);
    }

    .form-group label .optional {
      color: var(--smoke);
      font-weight: 400;
      font-size: 0.75rem;
    }

    .form-group input,
    .form-group textarea {
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      padding: 0.875rem 1rem;
      color: var(--pearl);
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      resize: none;
      width: 100%;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--orange);
      background: var(--carbon);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.1);
    }

    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: var(--smoke);
    }

    .form-group input.error,
    .form-group textarea.error {
      border-color: #ff4757;
      background: rgba(255, 71, 87, 0.05);
    }

    .form-group input.valid,
    .form-group textarea.valid {
      border-color: var(--orange);
    }

    /* Address Autocomplete */
    .address-wrapper {
      position: relative;
    }

    .address-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--carbon);
      border: 1px solid var(--slate);
      border-top: none;
      border-radius: 0 0 10px 10px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 100;
      display: none;
    }

    .address-suggestions.active {
      display: block;
    }

    .address-suggestion {
      padding: 12px 16px;
      cursor: pointer;
      border-bottom: 1px solid var(--graphite);
      transition: background 0.2s ease;
    }

    .address-suggestion:last-child {
      border-bottom: none;
    }

    .address-suggestion:hover {
      background: var(--graphite);
    }

    .address-suggestion-main {
      color: var(--pearl);
      font-weight: 500;
      margin-bottom: 2px;
    }

    .address-suggestion-secondary {
      color: var(--smoke);
      font-size: 0.8rem;
    }

    .address-loading {
      padding: 12px 16px;
      color: var(--smoke);
      text-align: center;
      font-size: 0.85rem;
    }

    .address-suggestion.manual-entry {
      background: var(--graphite);
      border-top: 1px solid var(--slate);
    }

    .address-suggestion.manual-entry:hover {
      background: var(--slate);
    }

    .address-suggestion.manual-entry .address-suggestion-main {
      color: var(--orange);
    }

    .manual-badge {
      margin-top: 8px;
      padding: 8px 12px;
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 8px;
      font-size: 0.8rem;
      color: var(--orange);
    }

    .manual-badge a {
      color: var(--amber);
      text-decoration: underline;
      cursor: pointer;
    }

    .error-msg {
      font-size: 0.75rem;
      color: #ff4757;
      min-height: 1rem;
    }

    /* Crypto Selection */
    .crypto-select {
      margin-top: 2rem;
    }

    .crypto-select-title {
      font-size: 0.85rem;
      color: var(--orange);
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      font-weight: 600;
    }

    .crypto-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }

    .crypto-option {
      background: var(--graphite);
      border: 2px solid transparent;
      border-radius: 12px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .crypto-option:hover {
      background: var(--slate);
      border-color: var(--slate);
    }

    .crypto-option.selected {
      border-color: var(--orange);
      background: rgba(255, 107, 0, 0.1);
    }

    .crypto-option-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      color: white;
    }

    .crypto-option-name {
      font-size: 0.8rem;
      color: var(--pearl);
      font-weight: 500;
    }

    .checkout-btn {
      width: 100%;
      margin-top: 1.5rem;
      padding: 1.25rem;
      font-size: 1rem;
    }

    .checkout-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    /* Payment Modal */
    .payment-info {
      text-align: center;
    }

    .payment-amount {
      font-family: 'Syne', sans-serif;
      font-size: 2.75rem;
      font-weight: 800;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .payment-timer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      padding: 0.75rem 1.25rem;
      border-radius: 50px;
      margin-bottom: 1.5rem;
      color: var(--orange);
      font-size: 0.95rem;
    }

    .payment-timer strong {
      font-family: 'Syne', sans-serif;
      font-size: 1.1rem;
      color: var(--orange-bright);
    }

    .payment-timer.warning {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.4);
      color: #ef4444;
      animation: pulse-warning 1s ease-in-out infinite;
    }

    .payment-timer.warning strong {
      color: #ef4444;
    }

    @keyframes pulse-warning {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .payment-crypto {
      color: var(--orange);
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }

    .payment-breakdown {
      background: var(--graphite);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .payment-breakdown-row {
      display: flex;
      justify-content: space-between;
      padding: 0.4rem 0;
      color: var(--silver);
    }

    .payment-breakdown-row.total {
      border-top: 1px solid var(--slate);
      margin-top: 0.5rem;
      padding-top: 0.75rem;
      color: var(--white);
      font-weight: 600;
    }

    .payment-breakdown-row.shipping span:last-child {
      color: var(--amber);
    }

    .payment-breakdown-row.free-shipping span:last-child {
      color: #00ff88;
    }

    /* Trust Stats / Persuasion Section */
    .trust-stats {
      background: linear-gradient(135deg, rgba(255, 107, 0, 0.1), rgba(255, 179, 71, 0.05));
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .trust-stats-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--orange);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .trust-stat-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.6rem 0;
      border-bottom: 1px solid rgba(255, 107, 0, 0.1);
    }

    .trust-stat-item:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .trust-stat-icon {
      font-size: 1.25rem;
      flex-shrink: 0;
    }

    .trust-stat-text {
      font-size: 0.85rem;
      color: var(--pearl);
      line-height: 1.5;
    }

    .trust-stat-text strong {
      color: var(--orange);
    }

    .trust-stat-text .highlight {
      color: #00ff88;
      font-weight: 600;
    }

    /* Cancel Confirmation Modal */
    .cancel-confirm-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .cancel-confirm-overlay.active {
      display: flex;
    }

    .cancel-confirm-box {
      background: linear-gradient(145deg, var(--carbon) 0%, var(--black) 100%);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 20px;
      padding: 2.5rem;
      max-width: 420px;
      text-align: center;
      position: relative;
      animation: popIn 0.3s ease;
    }

    @keyframes popIn {
      0% { transform: scale(0.9); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .cancel-confirm-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--silver);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .cancel-confirm-close:hover {
      color: var(--white);
    }

    .cancel-confirm-icon {
      font-size: 3.5rem;
      margin-bottom: 1rem;
    }

    .cancel-confirm-title {
      font-family: 'Syne', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 0.75rem;
    }

    .cancel-confirm-text {
      color: var(--silver);
      font-size: 0.95rem;
      margin-bottom: 0.5rem;
      line-height: 1.6;
    }

    .cancel-code-box {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      background: rgba(255, 107, 0, 0.1);
      border: 2px dashed var(--orange);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      margin: 1.25rem 0;
    }

    .cancel-code {
      font-family: 'Syne', sans-serif;
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--orange);
      letter-spacing: 0.1em;
    }

    .cancel-copy-btn {
      background: var(--orange);
      border: none;
      color: var(--black);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cancel-copy-btn:hover {
      background: var(--orange-bright);
      transform: scale(1.05);
    }

    .cancel-confirm-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .cancel-confirm-buttons button {
      flex: 1;
      padding: 1rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cancel-btn-okay {
      background: linear-gradient(135deg, var(--orange) 0%, var(--amber) 100%);
      border: none;
      color: var(--black);
    }

    .cancel-btn-okay:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
      transform: translateY(-2px);
    }

    .cancel-btn-no {
      background: linear-gradient(135deg, var(--orange) 0%, var(--orange-bright) 100%);
      border: none;
      color: var(--black);
    }

    .cancel-btn-no:hover {
      box-shadow: 0 8px 25px rgba(255, 107, 0, 0.4);
      transform: translateY(-2px);
    }

    .cancel-btn-yes {
      background: var(--graphite);
      border: 1px solid var(--slate);
      color: var(--pearl);
    }

    .cancel-btn-yes:hover {
      background: var(--slate);
      border-color: #ff4757;
      color: #ff4757;
    }

    .qr-container {
      background: white;
      padding: 1rem;
      border-radius: 16px;
      display: inline-block;
      margin-bottom: 1.5rem;
    }

    .qr-container canvas {
      display: block;
    }

    .wallet-address {
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .wallet-address-text {
      flex: 1;
      font-family: monospace;
      font-size: 0.75rem;
      color: var(--pearl);
      word-break: break-all;
      text-align: left;
    }

    .copy-btn {
      background: var(--slate);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      color: var(--pearl);
      cursor: pointer;
      font-size: 0.8rem;
      white-space: nowrap;
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      background: var(--orange);
      color: var(--black);
    }

    .copy-btn.copied {
      background: var(--amber);
      color: var(--black);
    }

    .tx-input {
      margin-top: 1.5rem;
    }

    .tx-input label {
      display: block;
      font-size: 0.85rem;
      color: var(--smoke);
      margin-bottom: 0.5rem;
      text-align: left;
    }

    .tx-input input {
      width: 100%;
      background: var(--graphite);
      border: 1px solid var(--slate);
      border-radius: 10px;
      padding: 1rem;
      color: var(--pearl);
      font-family: monospace;
      font-size: 0.85rem;
    }

    .tx-input input:focus {
      outline: none;
      border-color: var(--orange);
    }

    .tx-input input::placeholder {
      color: var(--smoke);
    }

    /* Confirmation */
    .confirmation {
      text-align: center;
      padding: 2rem 0;
    }

    .confirmation-icon {
      width: 90px;
      height: 90px;
      background: linear-gradient(135deg, var(--orange), var(--amber));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      position: relative;
      animation: iconEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      opacity: 0;
      transform: scale(0.3) translateY(30px);
    }

    @keyframes iconEntrance {
      0% {
        opacity: 0;
        transform: scale(0.3) translateY(30px);
      }
      50% {
        opacity: 1;
        transform: scale(1.15) translateY(-10px);
      }
      70% {
        transform: scale(0.95) translateY(0);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .confirmation-icon::before {
      content: '';
      position: absolute;
      inset: -8px;
      border-radius: 50%;
      border: 2px solid var(--orange);
      opacity: 0;
      animation: ringPulse 0.6s ease-out 0.4s forwards;
    }

    .confirmation-icon::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: var(--gloss);
    }

    @keyframes ringPulse {
      0% {
        opacity: 0.8;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(1.5);
      }
    }

    .confirmation-icon svg {
      width: 45px;
      height: 45px;
      stroke: var(--black);
      stroke-width: 3;
      stroke-dasharray: 50;
      stroke-dashoffset: 50;
      animation: checkDraw 0.5s ease-out 0.3s forwards;
    }

    @keyframes checkDraw {
      to {
        stroke-dashoffset: 0;
      }
    }

    .confirmation h2 {
      font-family: 'Syne', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 1rem;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeSlideUp 0.5s ease-out 0.5s forwards;
    }

    @keyframes fadeSlideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .confirmation-messages {
      text-align: left;
      background: var(--graphite);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeSlideUp 0.5s ease-out 0.7s forwards;
    }

    .confirmation-messages p {
      color: var(--silver);
      font-size: 0.95rem;
      padding: 0.5rem 0;
      padding-left: 1.5rem;
      position: relative;
      opacity: 0;
      transform: translateX(-10px);
    }

    .confirmation-messages p:nth-child(1) { animation: messageSlide 0.4s ease-out 0.9s forwards; }
    .confirmation-messages p:nth-child(2) { animation: messageSlide 0.4s ease-out 1.1s forwards; }
    .confirmation-messages p:nth-child(3) { animation: messageSlide 0.4s ease-out 1.3s forwards; }

    @keyframes messageSlide {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .confirmation-messages p::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--orange);
      font-weight: bold;
    }

    .confirmation-warning {
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 10px;
      padding: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      text-align: left;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeSlideUp 0.5s ease-out 1.5s forwards;
    }

    .confirmation-warning svg {
      width: 20px;
      height: 20px;
      stroke: var(--orange);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .confirmation-warning p {
      color: var(--orange);
      font-size: 0.9rem;
    }

    /* Footer */
    footer {
      padding: 4rem;
      border-top: 1px solid var(--graphite);
      margin-top: 4rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
    }

    .footer-links a {
      color: var(--smoke);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: var(--orange);
    }

    .footer-copy {
      font-size: 0.85rem;
      color: var(--slate);
    }

    /* Disclaimer */
    .disclaimer {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem 4rem;
      text-align: center;
    }

    .disclaimer p {
      font-size: 0.8rem;
      color: var(--smoke);
      line-height: 1.7;
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .products-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 900px) {
      nav {
        padding: 1rem 2rem;
      }
      
      .nav-links {
        display: none;
      }
      
      .hero, .products-section, .why-section, .how-section {
        padding: 4rem 2rem;
      }
      
      .why-grid {
        grid-template-columns: 1fr;
      }
      
      .steps-container {
        flex-direction: column;
        align-items: center;
      }
      
      .steps-container::before {
        display: none;
      }
      
      .crypto-options {
        grid-template-columns: repeat(2, 1fr);
      }

      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .hero-ctas {
        flex-direction: column;
      }
      
      .footer-content {
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="grid-bg"></div>
  <div class="glow-orb glow-orb-1"></div>
  <div class="glow-orb glow-orb-2"></div>
  
  <!-- Cart Add Notification -->
  <div class="flying-item" id="flyingItem"></div>

  <!-- Email Signup Toggle Button -->
  <button class="email-signup-toggle" onclick="toggleEmailSignup()">📧 Get Updates</button>

  <!-- Email Signup Panel -->
  <div class="email-signup-panel" id="emailSignupPanel">
    <button class="email-signup-close" onclick="closeEmailSignup()">✕</button>
    <div class="email-signup-icon">📬</div>
    <h3>Stay in the Loop</h3>
    <p>Get exclusive deals, new product alerts, and health tips delivered to your inbox.</p>
    <div class="email-signup-benefits">
      <div class="email-signup-benefit"><span>✓</span> Exclusive discounts up to 20% off</div>
      <div class="email-signup-benefit"><span>✓</span> Early access to new products</div>
      <div class="email-signup-benefit"><span>✓</span> Free health guides & tips</div>
    </div>
    <form class="email-signup-form" id="emailSignupForm" onsubmit="submitEmailSignup(event)">
      <input type="text" id="signupName" placeholder="Your name" required>
      <input type="email" id="signupEmail" placeholder="Your email" required>
      <button type="submit" class="email-signup-btn">Subscribe Now</button>
    </form>
  </div>

  <!-- Promo Banner -->
  <div class="promo-banner">
    🎉 Happy New Year! Use code <strong>NEWYEARS</strong> for 15% off your first order
  </div>

  <nav>
    <div class="logo">
    </div>
    <ul class="nav-links">
      <li><a href="#products">Products</a></li>
      <li><a href="#find-treatment">Find Treatment</a></li>
      <li><a href="#research">Research</a></li>
      <li><a href="#how-it-works">How It Works</a></li>
    </ul>
    <div class="nav-cta">
      <button class="cart-btn" onclick="openCart()">
        <svg viewBox="0 0 24 24" stroke-width="2">
          <path d="M6 6h15l-1.5 9h-12z"/>
          <circle cx="9" cy="20" r="1"/>
          <circle cx="18" cy="20" r="1"/>
          <path d="M6 6L5 3H2"/>
        </svg>
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      
      <h1>Men's Health,<br><span class="highlight">Decentralized</span></h1>
      <p>Skip the expensive doctor visits. Get proven treatments for hair loss and ED at a fraction of the cost. Pay with crypto, stay private.</p>
      <div class="hero-ctas">
        <a href="#products" class="btn btn-primary">
          Browse Products
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
        <a href="#find-treatment" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4"/>
            <circle cx="12" cy="12" r="10"/>
          </svg>
          Find My Treatment
        </a>
      </div>
      <div class="crypto-icons">
        <span>We Accept:</span>
        <div class="crypto-icon btc">₿</div>
        <div class="crypto-icon eth">Ξ</div>
        <div class="crypto-icon sol">◎</div>
        <div class="crypto-icon usdt">₮</div>
      </div>
    </div>
  </section>

  <section id="why" class="why-section">
    <div class="section-header">
      <p class="section-label">Why Decentral Med</p>
      <h2 class="section-title">Healthcare Without the Markup</h2>
    </div>
    <div class="why-grid">
      <div class="why-card">
        <div class="why-icon">💰</div>
        <h3>80% Less Than Pharmacies</h3>
        <p>No middlemen, no insurance games. Same FDA-approved medications at prices that actually make sense.</p>
      </div>
      <div class="why-card">
        <div class="why-icon">🔒</div>
        <h3>Complete Privacy</h3>
        <p>Crypto payments mean no paper trail. No awkward pharmacy pickups. Discreet packaging, always.</p>
      </div>
      <div class="why-card">
        <div class="why-icon">⚡</div>
        <h3>No Gatekeeping</h3>
        <p>Skip the $200 telehealth consultation. You know what you need. We get it to you.</p>
      </div>
    </div>
  </section>

  <section id="products" class="products-section">
    <div class="section-header">
      <p class="section-label">Our Products</p>
      <h2 class="section-title">Treatments That Work</h2>
    </div>
    <div class="products-grid">
      <div class="product-card">
        <div class="product-badge">In Stock</div>
        <div class="product-image">
          <span class="pill-icon"><img src="Tadalafil.png" alt="Tadalafil"></span>
        </div>
        <div class="product-info">
          <p class="product-category">ED Treatment</p>
          <h3 class="product-name">Tadalafil</h3>
          <p class="product-generic">(Generic Cialis)</p>
          <p class="product-desc">Daily use for 24/7 readiness. No more planning ahead.</p>
          <a class="learn-more-link" href="#research-tadalafil">Learn more →</a>
          <div class="tadalafil-dose-selector">
            <div class="dose-row">
              <button class="tadalafil-dose-btn" data-dose="2.5" onclick="selectTadalafilDoseBtn('2.5')">2.5<span>mg</span></button>
              <button class="tadalafil-dose-btn active" data-dose="5" onclick="selectTadalafilDoseBtn('5')">5<span>mg</span></button>
              <button class="tadalafil-dose-btn" data-dose="10" onclick="selectTadalafilDoseBtn('10')">10<span>mg</span></button>
              <button class="tadalafil-dose-btn" data-dose="20" onclick="selectTadalafilDoseBtn('20')">20<span>mg</span></button>
            </div>
            <div class="dose-row-advanced">
              <button class="tadalafil-dose-btn-adv" data-dose="40" onclick="selectTadalafilDoseBtn('40')">40<span>mg</span></button>
              <button class="tadalafil-dose-btn-adv" data-dose="60" onclick="selectTadalafilDoseBtn('60')">60<span>mg</span></button>
              <button class="tadalafil-dose-btn-adv" data-dose="80" onclick="selectTadalafilDoseBtn('80')">80<span>mg</span></button>
            </div>
          </div>
          <div class="product-footer">
            <div class="product-price" id="tadalafil-price">$39.99 <span>/60 pills</span></div>
            <button class="add-to-cart" onclick="addTadalafilToCart()">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="product-card">
        <div class="product-badge">Popular</div>
        <div class="product-image">
          <span class="pill-icon"><img src="Sildenafil.png" alt="Sildenafil"></span>
        </div>
        <div class="product-info">
          <p class="product-category">ED Treatment</p>
          <h3 class="product-name">Sildenafil</h3>
          <p class="product-generic">(Generic Viagra)</p>
          <p class="product-desc">Fast-acting. Works in 30-60 mins. The classic that started it all.</p>
          <a class="learn-more-link" href="#research-sildenafil">Learn more →</a>
          <div class="sildenafil-dose-selector">
            <div class="dose-row">
              <button class="sildenafil-dose-btn" data-dose="25" onclick="selectSildenafilDoseBtn('25')">25<span>mg</span></button>
              <button class="sildenafil-dose-btn active" data-dose="50" onclick="selectSildenafilDoseBtn('50')">50<span>mg</span></button>
              <button class="sildenafil-dose-btn" data-dose="100" onclick="selectSildenafilDoseBtn('100')">100<span>mg</span></button>
              <button class="sildenafil-dose-btn" data-dose="200" onclick="selectSildenafilDoseBtn('200')">200<span>mg</span></button>
            </div>
          </div>
          <div class="product-footer">
            <div class="product-price" id="sildenafil-price">$45.99 <span>/60 pills</span></div>
            <button class="add-to-cart" onclick="addSildenafilToCart()">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="product-card">
        <div class="product-badge">Best Seller</div>
        <div class="product-image">
          <span class="pill-icon"><img src="Finasteride.png" alt="Finasteride"></span>
        </div>
        <div class="product-info">
          <p class="product-category">Hair Loss</p>
          <h3 class="product-name">Finasteride</h3>
          <p class="product-generic">(1mg tablets)</p>
          <p class="product-desc">DHT blocker. Stop hair loss at the source. 90% success rate.</p>
          <a class="learn-more-link" href="#research-finasteride">Learn more →</a>
          <div class="product-footer">
            <div class="product-price">$25.99 <span>/90 pills</span></div>
            <button class="add-to-cart" onclick="addToCart('Finasteride 1mg (90 pills)', 25.99, '💎')">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="product-card">
        <div class="product-badge">3 Month Supply</div>
        <div class="product-image">
          <span class="pill-icon"><img src="Minoxidil.png" alt="Minoxidil"></span>
        </div>
        <div class="product-info">
          <p class="product-category">Hair Loss</p>
          <h3 class="product-name">Minoxidil</h3>
          <p class="product-generic">(Oral tablets)</p>
          <p class="product-desc">Oral formula. More effective than topical. 90 day supply.</p>
          <a class="learn-more-link" href="#research-minoxidil">Learn more →</a>
          <div class="minoxidil-dose-selector">
            <div class="dose-row-2">
              <button class="minoxidil-dose-btn active" data-dose="2.5" onclick="selectMinoxidilDoseBtn('2.5')">2.5<span>mg</span></button>
              <button class="minoxidil-dose-btn" data-dose="5" onclick="selectMinoxidilDoseBtn('5')">5<span>mg</span></button>
            </div>
          </div>
          <div class="product-footer">
            <div class="product-price" id="minoxidil-price">$24.99 <span>/90 pills</span></div>
            <button class="add-to-cart" onclick="addMinoxidilToCart()">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="product-card">
        <div class="product-badge">Advanced</div>
        <div class="product-image">
          <span class="pill-icon"><img src="Dutasteride.png" alt="Dutasteride"></span>
        </div>
        <div class="product-info">
          <p class="product-category">Hair Loss</p>
          <h3 class="product-name">Dutasteride</h3>
          <p class="product-generic">(0.5mg capsules)</p>
          <p class="product-desc">Advanced DHT inhibitor. Stronger than Finasteride for stubborn cases.</p>
          <a class="learn-more-link" href="#research-dutasteride">Learn more →</a>
          <div class="product-footer">
            <div class="product-price">$32.99 <span>/90 pills</span></div>
            <button class="add-to-cart" onclick="addToCart('Dutasteride 0.5mg (90 pills)', 32.99, '💊')">
              <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bulk Savings Banner -->
    <div style="max-width: 1400px; margin: 3rem auto 0; padding: 1.5rem 2rem; background: linear-gradient(135deg, rgba(255,107,0,0.15), rgba(255,179,71,0.1)); border: 1px solid rgba(255,107,0,0.3); border-radius: 12px; display: flex; align-items: center; justify-content: center; gap: 2rem; flex-wrap: wrap;">
      <div style="display: flex; align-items: center; gap: 0.75rem;">
        <span style="font-size: 1.5rem;">🚚</span>
        <span style="color: var(--pearl); font-weight: 600;">FREE SHIPPING on orders over $75</span>
      </div>
      <div style="width: 1px; height: 24px; background: rgba(255,107,0,0.3);"></div>
      <div style="display: flex; align-items: center; gap: 0.75rem;">
        <span style="font-size: 1.5rem;">💰</span>
        <span style="color: var(--pearl); font-weight: 600;">Save up to 20% on bulk orders</span>
      </div>
    </div>
  </section>

  <!-- Find Your Treatment Section -->
  <section id="find-treatment" class="quiz-section">
    <div class="section-header">
      <p class="section-label">Personalized For You</p>
      <h2 class="section-title">Find Your Treatment</h2>
      <p class="section-subtitle">Answer a few questions and we'll recommend the best products for your needs</p>
    </div>
    
    <div class="quiz-container">
      <div class="quiz-card" id="quizCard">
        <!-- Step indicators -->
        <div class="quiz-steps">
          <div class="quiz-step-dot active" data-step="1">1</div>
          <div class="quiz-step-line"></div>
          <div class="quiz-step-dot" data-step="2">2</div>
          <div class="quiz-step-line"></div>
          <div class="quiz-step-dot" data-step="3">3</div>
          <div class="quiz-step-line"></div>
          <div class="quiz-step-dot" data-step="4">4</div>
          <div class="quiz-step-line"></div>
          <div class="quiz-step-dot" data-step="5">5</div>
        </div>

        <!-- Question 1 -->
        <div class="quiz-slide active" data-slide="1">
          <h3 class="quiz-q-title">What are you looking to treat?</h3>
          <p class="quiz-q-sub">Select your primary concern</p>
          <div class="quiz-options-grid">
            <div class="quiz-opt" data-value="hairloss" onclick="selectQuizOpt(this, 1)">
              <span class="quiz-opt-icon">💇‍♂️</span>
              <span class="quiz-opt-label">Hair Loss</span>
            </div>
            <div class="quiz-opt" data-value="ed" onclick="selectQuizOpt(this, 1)">
              <span class="quiz-opt-icon">💪</span>
              <span class="quiz-opt-label">Erectile Dysfunction</span>
            </div>
            <div class="quiz-opt" data-value="both" onclick="selectQuizOpt(this, 1)">
              <span class="quiz-opt-icon">✨</span>
              <span class="quiz-opt-label">Both</span>
            </div>
          </div>
        </div>

        <!-- Question 2: Hair Loss Severity -->
        <div class="quiz-slide" data-slide="2">
          <h3 class="quiz-q-title">How severe is your hair loss?</h3>
          <p class="quiz-q-sub">This helps us recommend the right strength</p>
          <div class="quiz-options-grid">
            <div class="quiz-opt" data-value="early" onclick="selectQuizOpt(this, 2)">
              <span class="quiz-opt-icon">🌱</span>
              <span class="quiz-opt-label">Early Stage</span>
              <span class="quiz-opt-desc">Just starting to notice</span>
            </div>
            <div class="quiz-opt" data-value="moderate" onclick="selectQuizOpt(this, 2)">
              <span class="quiz-opt-icon">🍂</span>
              <span class="quiz-opt-label">Moderate</span>
              <span class="quiz-opt-desc">Visible thinning</span>
            </div>
            <div class="quiz-opt" data-value="advanced" onclick="selectQuizOpt(this, 2)">
              <span class="quiz-opt-icon">🌵</span>
              <span class="quiz-opt-label">Advanced</span>
              <span class="quiz-opt-desc">Significant loss</span>
            </div>
          </div>
        </div>

        <!-- Question 3: ED Severity -->
        <div class="quiz-slide" data-slide="3">
          <h3 class="quiz-q-title">How would you describe your ED?</h3>
          <p class="quiz-q-sub">This helps determine the right dosage</p>
          <div class="quiz-options-grid">
            <div class="quiz-opt" data-value="mild" onclick="selectQuizOpt(this, 3)">
              <span class="quiz-opt-icon">🌤️</span>
              <span class="quiz-opt-label">Mild</span>
              <span class="quiz-opt-desc">Occasional difficulty</span>
            </div>
            <div class="quiz-opt" data-value="moderate" onclick="selectQuizOpt(this, 3)">
              <span class="quiz-opt-icon">⛅</span>
              <span class="quiz-opt-label">Moderate</span>
              <span class="quiz-opt-desc">Frequent issues</span>
            </div>
            <div class="quiz-opt" data-value="severe" onclick="selectQuizOpt(this, 3)">
              <span class="quiz-opt-icon">🌧️</span>
              <span class="quiz-opt-label">Severe</span>
              <span class="quiz-opt-desc">Consistent difficulty</span>
            </div>
          </div>
        </div>

        <!-- Question 4: ED Usage Preference -->
        <div class="quiz-slide" data-slide="4">
          <h3 class="quiz-q-title">How do you plan to use ED medication?</h3>
          <p class="quiz-q-sub">Different options for different lifestyles</p>
          <div class="quiz-options-grid">
            <div class="quiz-opt" data-value="daily" onclick="selectQuizOpt(this, 4)">
              <span class="quiz-opt-icon">📅</span>
              <span class="quiz-opt-label">Daily Use</span>
              <span class="quiz-opt-desc">Always ready, no planning</span>
            </div>
            <div class="quiz-opt" data-value="asneeded" onclick="selectQuizOpt(this, 4)">
              <span class="quiz-opt-icon">⚡</span>
              <span class="quiz-opt-label">As Needed</span>
              <span class="quiz-opt-desc">Take before activity</span>
            </div>
            <div class="quiz-opt" data-value="weekend" onclick="selectQuizOpt(this, 4)">
              <span class="quiz-opt-icon">🎉</span>
              <span class="quiz-opt-label">Weekend Pill</span>
              <span class="quiz-opt-desc">One pill, 36+ hours</span>
            </div>
          </div>
        </div>

        <!-- Question 5: Experience -->
        <div class="quiz-slide" data-slide="5">
          <h3 class="quiz-q-title">Have you tried these treatments before?</h3>
          <p class="quiz-q-sub">Your experience helps personalize recommendations</p>
          <div class="quiz-options-grid">
            <div class="quiz-opt" data-value="new" onclick="selectQuizOpt(this, 5)">
              <span class="quiz-opt-icon">🆕</span>
              <span class="quiz-opt-label">First Time</span>
              <span class="quiz-opt-desc">Never tried before</span>
            </div>
            <div class="quiz-opt" data-value="tried" onclick="selectQuizOpt(this, 5)">
              <span class="quiz-opt-icon">✅</span>
              <span class="quiz-opt-label">Tried Before</span>
              <span class="quiz-opt-desc">Looking to continue</span>
            </div>
            <div class="quiz-opt" data-value="switch" onclick="selectQuizOpt(this, 5)">
              <span class="quiz-opt-icon">🔄</span>
              <span class="quiz-opt-label">Want to Switch</span>
              <span class="quiz-opt-desc">Current treatment not working</span>
            </div>
          </div>
        </div>

        <!-- Results -->
        <div class="quiz-slide" data-slide="results">
          <div class="quiz-results-container" id="quizResultsContainer">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Navigation -->
        <div class="quiz-nav-btns">
          <button class="quiz-prev-btn" onclick="prevQuizSlide()" style="visibility: hidden;">← Back</button>
          <button class="quiz-next-btn" onclick="nextQuizSlide()" disabled>Next →</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Clinical Research Section -->
  <section id="research" class="research-section">
    <div class="section-header">
      <p class="section-label">Evidence Based</p>
      <h2 class="section-title">Clinical Research</h2>
      <p class="section-subtitle">Our treatments are backed by decades of scientific studies</p>
    </div>

    <div class="research-grid">
      <!-- Finasteride -->
      <div class="research-card" id="research-finasteride">
        <div class="research-card-header">
          <div class="research-drug-icon">Fin</div>
          <div>
            <h3>Finasteride</h3>
            <p>1mg DHT Blocker</p>
          </div>
        </div>
        <div class="research-stats">
          <div class="research-stat">
            <span class="stat-value">90%</span>
            <span class="stat-label">Stop Hair Loss</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">70%</span>
            <span class="stat-label">DHT Blocked</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">66%</span>
            <span class="stat-label">See Regrowth</span>
          </div>
        </div>
        <div class="research-bar">
          <div class="research-bar-label">Effectiveness</div>
          <div class="research-bar-track">
            <div class="research-bar-fill" style="width: 90%"></div>
          </div>
        </div>
        <p class="research-text">Finasteride blocks the enzyme that converts testosterone to DHT, the hormone causing male pattern baldness. A 5-year study of 1,553 men showed 90% maintained or increased hair count.</p>
        <p class="research-source">Source: Journal of the American Academy of Dermatology</p>
        <button class="dive-deeper-link" onclick="this.nextElementSibling.classList.toggle('expanded'); this.textContent = this.nextElementSibling.classList.contains('expanded') ? '← Close Details' : 'Dive Deeper →';">Dive Deeper →</button>
        <div class="deep-dive-expand">
          <div class="deep-dive-expand-content">
            <h4>How Finasteride Works</h4>
            <p>Finasteride is a selective inhibitor of Type II 5α-reductase, the enzyme responsible for converting testosterone to dihydrotestosterone (DHT). DHT is the primary androgen responsible for androgenetic alopecia (male pattern hair loss).</p>
            <p>By inhibiting this enzyme, Finasteride reduces scalp DHT levels by approximately 70%, which slows or stops the miniaturization of hair follicles.</p>
            
            <h4>Clinical Evidence</h4>
            <ul>
              <li><strong>5-Year Pivotal Study (n=1,553):</strong> 90% of men taking Finasteride maintained or increased hair count compared to baseline.</li>
              <li><strong>Hair Count Analysis:</strong> Average increase of 277 hairs in a 1-inch diameter circle at 5 years.</li>
              <li><strong>Patient Self-Assessment:</strong> 65% of men rated their hair growth as improved after 2 years.</li>
            </ul>

            <h4>Optimal Usage</h4>
            <ul>
              <li><strong>Standard Dose:</strong> 1mg once daily</li>
              <li><strong>Initial Results:</strong> 3-6 months for slowing of hair loss</li>
              <li><strong>Visible Regrowth:</strong> 6-12 months for most patients</li>
              <li><strong>Maximum Benefit:</strong> 1-2 years of continuous use</li>
            </ul>

            <h4>Safety Profile</h4>
            <p>Finasteride has been used by millions of men worldwide since FDA approval in 1997. Side effects are rare (less than 2% of patients) and typically resolve upon discontinuation.</p>

            <div class="deep-dive-sources-inline">
              <h4>📚 Sources</h4>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/9777765/" target="_blank">Finasteride in the treatment of men with androgenetic alopecia</a> — Journal of the American Academy of Dermatology, 1998</p>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/11809594/" target="_blank">Long-term (5-year) multinational experience with finasteride 1 mg in the treatment of men with androgenetic alopecia</a> — European Journal of Dermatology, 2002</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Minoxidil -->
      <div class="research-card" id="research-minoxidil">
        <div class="research-card-header">
          <div class="research-drug-icon">Min</div>
          <div>
            <h3>Minoxidil</h3>
            <p>2.5mg Oral Tablet</p>
          </div>
        </div>
        <div class="research-stats">
          <div class="research-stat">
            <span class="stat-value">3x</span>
            <span class="stat-label">vs Topical</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">66%</span>
            <span class="stat-label">See Regrowth</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">2.5mg</span>
            <span class="stat-label">Optimal Dose</span>
          </div>
        </div>
        <div class="research-bar">
          <div class="research-bar-label">Regrowth Rate</div>
          <div class="research-bar-track">
            <div class="research-bar-fill" style="width: 85%"></div>
          </div>
        </div>
        <p class="research-text">Oral Minoxidil increases blood flow to hair follicles. A 2020 systematic review found it significantly more effective than topical formulations, with 2.5mg showing optimal results.</p>
        <p class="research-source">Source: Dermatologic Therapy (2020)</p>
        <button class="dive-deeper-link" onclick="this.nextElementSibling.classList.toggle('expanded'); this.textContent = this.nextElementSibling.classList.contains('expanded') ? '← Close Details' : 'Dive Deeper →';">Dive Deeper →</button>
        <div class="deep-dive-expand">
          <div class="deep-dive-expand-content">
            <h4>How Oral Minoxidil Works</h4>
            <p>Minoxidil was originally developed as an oral antihypertensive medication. Its hair growth properties were discovered as a side effect. Oral minoxidil provides superior bioavailability and more consistent results than topical.</p>
            <ul>
              <li><strong>Vasodilation:</strong> Opens potassium channels, increasing blood flow to hair follicles</li>
              <li><strong>Growth Factor Stimulation:</strong> Upregulates VEGF and promotes angiogenesis around follicles</li>
              <li><strong>Prolonged Anagen Phase:</strong> Extends the active growth phase of hair</li>
            </ul>
            
            <h4>Clinical Evidence</h4>
            <ul>
              <li><strong>2020 Systematic Review:</strong> Oral minoxidil at 2.5-5mg daily showed significantly greater improvement vs topical 5% solution.</li>
              <li><strong>Combination Therapy:</strong> 66% of men experienced visible regrowth when combined with Finasteride.</li>
              <li><strong>Dose-Response:</strong> 2.5mg daily showed 85% of the efficacy of 5mg with fewer side effects.</li>
            </ul>

            <h4>Dosing Recommendations</h4>
            <ul>
              <li><strong>Starting Dose:</strong> 2.5mg once daily</li>
              <li><strong>Initial Shedding:</strong> Normal during first 2-8 weeks</li>
              <li><strong>Visible Results:</strong> 4-6 months for noticeable improvement</li>
              <li><strong>Best Results:</strong> When combined with a DHT blocker</li>
            </ul>

            <div class="deep-dive-sources-inline">
              <h4>📚 Sources</h4>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/38598226/" target="_blank">Oral Minoxidil vs Topical Minoxidil for Male Androgenetic Alopecia: A Randomized Clinical Trial</a> — JAMA Dermatology, 2024</p>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/32622136/" target="_blank">Oral minoxidil treatment for hair loss: A review of efficacy and safety</a> — Journal of the American Academy of Dermatology, 2021</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Dutasteride -->
      <div class="research-card" id="research-dutasteride">
        <div class="research-card-header">
          <div class="research-drug-icon">Dut</div>
          <div>
            <h3>Dutasteride</h3>
            <p>0.5mg Advanced DHT Blocker</p>
          </div>
        </div>
        <div class="research-stats">
          <div class="research-stat">
            <span class="stat-value">90%+</span>
            <span class="stat-label">DHT Blocked</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">1.5x</span>
            <span class="stat-label">vs Finasteride</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">95%</span>
            <span class="stat-label">Success Rate</span>
          </div>
        </div>
        <div class="research-bar">
          <div class="research-bar-label">DHT Blocking Power</div>
          <div class="research-bar-track">
            <div class="research-bar-fill" style="width: 95%"></div>
          </div>
        </div>
        <p class="research-text">Dutasteride blocks both Type I and Type II enzymes, reducing DHT by 90%+ compared to Finasteride's 70%. Ideal for those who don't respond well to Finasteride.</p>
        <p class="research-source">Source: BJU International</p>
        <button class="dive-deeper-link" onclick="this.nextElementSibling.classList.toggle('expanded'); this.textContent = this.nextElementSibling.classList.contains('expanded') ? '← Close Details' : 'Dive Deeper →';">Dive Deeper →</button>
        <div class="deep-dive-expand">
          <div class="deep-dive-expand-content">
            <h4>How Dutasteride Works</h4>
            <p>Dutasteride is a dual 5α-reductase inhibitor, blocking both Type I and Type II isoenzymes. This is the key difference from Finasteride, which only blocks Type II.</p>
            <ul>
              <li><strong>Type I Enzyme:</strong> Found in sebaceous glands — blocked by Dutasteride only</li>
              <li><strong>Type II Enzyme:</strong> Primary enzyme in hair follicles — blocked by both</li>
              <li><strong>DHT Reduction:</strong> Dutasteride reduces serum DHT by >90% vs ~70% with Finasteride</li>
            </ul>
            
            <h4>Clinical Evidence</h4>
            <ul>
              <li><strong>ARIA Study (n=917):</strong> Dutasteride 0.5mg showed 1.5x greater hair count improvement vs Finasteride 1mg.</li>
              <li><strong>Target Area Hair Count:</strong> Dutasteride increased count by 109.6 hairs/inch² vs 75.6 for Finasteride.</li>
              <li><strong>Patient Satisfaction:</strong> 38% more patients rated improvement as "greatly improved" with Dutasteride.</li>
            </ul>

            <h4>When to Consider Dutasteride</h4>
            <ul>
              <li><strong>Finasteride Non-Responders:</strong> Men who have used Finasteride for 12+ months without results</li>
              <li><strong>Aggressive Hair Loss:</strong> Rapid progression or significant loss at a young age</li>
              <li><strong>Vertex (Crown) Pattern:</strong> Superior efficacy for crown hair loss</li>
            </ul>

            <div class="deep-dive-sources-inline">
              <h4>📚 Sources</h4>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/17110217/" target="_blank">The importance of dual 5alpha-reductase inhibition in the treatment of male pattern hair loss</a> — Journal of the American Academy of Dermatology, 2006</p>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/27549867/" target="_blank">Superiority of dutasteride over finasteride in hair regrowth and reversal of miniaturization in men with androgenetic alopecia</a> — Indian Journal of Dermatology, Venereology and Leprology, 2017</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tadalafil -->
      <div class="research-card" id="research-tadalafil">
        <div class="research-card-header">
          <div class="research-drug-icon">Tad</div>
          <div>
            <h3>Tadalafil</h3>
            <p>5mg Daily (Generic Cialis)</p>
          </div>
        </div>
        <div class="research-stats">
          <div class="research-stat">
            <span class="stat-value">81%</span>
            <span class="stat-label">Success Rate</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">36hrs</span>
            <span class="stat-label">Duration</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">24/7</span>
            <span class="stat-label">Ready</span>
          </div>
        </div>
        <div class="research-bar">
          <div class="research-bar-label">Success Rate</div>
          <div class="research-bar-track">
            <div class="research-bar-fill" style="width: 81%"></div>
          </div>
        </div>
        <p class="research-text">Tadalafil's 36-hour half-life allows for daily low-dose use. Clinical trials show 81% of men achieved successful intercourse vs 35% on placebo.</p>
        <p class="research-source">Source: Journal of Sexual Medicine</p>
        <button class="dive-deeper-link" onclick="this.nextElementSibling.classList.toggle('expanded'); this.textContent = this.nextElementSibling.classList.contains('expanded') ? '← Close Details' : 'Dive Deeper →';">Dive Deeper →</button>
        <div class="deep-dive-expand">
          <div class="deep-dive-expand-content">
            <h4>How Tadalafil Works</h4>
            <p>Tadalafil is a PDE5 inhibitor that enhances the natural erectile response to sexual stimulation. Unlike other PDE5 inhibitors, Tadalafil has a 17.5-hour half-life, providing effects for up to 36 hours.</p>
            <ul>
              <li><strong>PDE5 Inhibition:</strong> Blocks the enzyme that breaks down cGMP, enhancing blood flow</li>
              <li><strong>Extended Duration:</strong> Effects last up to 36 hours — "The Weekend Pill"</li>
              <li><strong>Daily Dosing:</strong> 5mg daily maintains steady levels for continuous readiness</li>
            </ul>
            
            <h4>Clinical Evidence</h4>
            <ul>
              <li><strong>Success Rate:</strong> 81% of men achieved successful intercourse vs 35% on placebo.</li>
              <li><strong>Daily Dosing Study:</strong> 67% reported "normal" erectile function on 5mg daily.</li>
              <li><strong>Rapid Onset:</strong> Effects can begin as early as 16 minutes after dosing.</li>
              <li><strong>Diabetes Patients:</strong> 64% success rate in men with diabetes.</li>
            </ul>

            <h4>Additional Benefits</h4>
            <ul>
              <li><strong>BPH Symptoms:</strong> FDA-approved to improve urinary symptoms</li>
              <li><strong>Spontaneity:</strong> No need to plan — always ready</li>
              <li><strong>Reduced Anxiety:</strong> Eliminates performance pressure</li>
            </ul>

            <div class="deep-dive-sources-inline">
              <h4>📚 Sources</h4>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/16766116/" target="_blank">Evaluation of the efficacy and safety of once-a-day dosing of tadalafil 5mg and 10mg in the treatment of erectile dysfunction</a> — European Urology, 2006</p>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/15866997/" target="_blank">Tadalafil improved erectile function at twenty-four and thirty-six hours after dosing in men with erectile dysfunction</a> — Journal of Andrology, 2005</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Sildenafil -->
      <div class="research-card" id="research-sildenafil">
        <div class="research-card-header">
          <div class="research-drug-icon">Sil</div>
          <div>
            <h3>Sildenafil</h3>
            <p>25-50mg As Needed (Generic Viagra)</p>
          </div>
        </div>
        <div class="research-stats">
          <div class="research-stat">
            <span class="stat-value">84%</span>
            <span class="stat-label">Success Rate</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">30min</span>
            <span class="stat-label">Works In</span>
          </div>
          <div class="research-stat">
            <span class="stat-value">25yrs</span>
            <span class="stat-label">Track Record</span>
          </div>
        </div>
        <div class="research-bar">
          <div class="research-bar-label">Clinical Success</div>
          <div class="research-bar-track">
            <div class="research-bar-fill" style="width: 84%"></div>
          </div>
        </div>
        <p class="research-text">The original ED medication with 25+ years of proven safety data. Works within 30-60 minutes and lasts 4-6 hours. A meta-analysis of 130 trials confirmed its efficacy.</p>
        <p class="research-source">Source: New England Journal of Medicine</p>
        <button class="dive-deeper-link" onclick="this.nextElementSibling.classList.toggle('expanded'); this.textContent = this.nextElementSibling.classList.contains('expanded') ? '← Close Details' : 'Dive Deeper →';">Dive Deeper →</button>
        <div class="deep-dive-expand">
          <div class="deep-dive-expand-content">
            <h4>How Sildenafil Works</h4>
            <p>Sildenafil (Viagra) was the first PDE5 inhibitor approved for ED, revolutionizing treatment when it launched in 1998. It was discovered accidentally during angina trials.</p>
            <ul>
              <li><strong>Mechanism:</strong> Inhibits PDE5, allowing enhanced blood flow during arousal</li>
              <li><strong>Onset:</strong> Works within 30-60 minutes</li>
              <li><strong>Duration:</strong> Effects last 4-6 hours</li>
              <li><strong>Food Interaction:</strong> Best taken on empty stomach</li>
            </ul>
            
            <h4>Clinical Evidence</h4>
            <ul>
              <li><strong>Meta-Analysis of 130 Trials:</strong> 84% of men achieved erections sufficient for intercourse.</li>
              <li><strong>First-Attempt Success:</strong> 74% success rate on the very first dose.</li>
              <li><strong>All Severities:</strong> Effective in mild (89%), moderate (81%), and severe (67%) ED.</li>
              <li><strong>25+ Years:</strong> Most extensive safety data of any ED medication.</li>
            </ul>

            <h4>Dosing Guidelines</h4>
            <ul>
              <li><strong>Starting Dose:</strong> 50mg taken 1 hour before activity</li>
              <li><strong>Dose Range:</strong> Can be adjusted to 25mg or 100mg</li>
              <li><strong>Maximum Frequency:</strong> Once per day</li>
              <li><strong>Age Adjustment:</strong> Men over 65 may start at 25mg</li>
            </ul>

            <div class="deep-dive-sources-inline">
              <h4>📚 Sources</h4>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/9614956/" target="_blank">Oral sildenafil in the treatment of erectile dysfunction</a> — New England Journal of Medicine, 1998</p>
              <p><a href="https://pubmed.ncbi.nlm.nih.gov/12076233/" target="_blank">Sildenafil for male erectile dysfunction: a systematic review and meta-analysis</a> — Archives of Internal Medicine, 2002</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="how-it-works" class="how-section">
    <div class="section-header">
      <p class="section-label">How It Works</p>
      <h2 class="section-title">Three Simple Steps</h2>
    </div>
    <div class="steps-container">
      <div class="step">
        <div class="step-number">1</div>
        <h3>Choose Products</h3>
        <p>Browse our selection and add what you need to your cart. No account required.</p>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <h3>Pay with Crypto</h3>
        <p>Select your preferred cryptocurrency and send payment to our wallet.</p>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <h3>Receive Discreetly</h3>
        <p>Your order ships in plain packaging. No one knows what's inside.</p>
      </div>
    </div>
  </section>

  <div class="disclaimer">
    <p>⚠️ These products require a prescription in most jurisdictions. Decentral Med does not provide medical advice. Consult a healthcare professional before use. By purchasing, you confirm you understand the risks and take full responsibility for your health decisions.</p>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-logo">
        <div class="logo-text" style="font-size:1.1rem;">Decentral<span>Med</span></div>
      </div>
      <div class="footer-links">
        <a href="#">FAQ</a>
        <a href="#">Shipping</a>
        <a href="#">Contact</a>
      </div>
      <div class="footer-copy">© 2024 Decentral Med</div>
    </div>
  </footer>

  <!-- Cart Modal -->
  <div class="modal-overlay" id="cartModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Your Cart</h2>
        <button class="modal-close" onclick="closeModal('cartModal')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div id="cartItems"></div>
        <div id="cartFooter" style="display: none;">
          <div class="cart-total">
            <span class="cart-total-label">Subtotal</span>
            <span class="cart-total-amount" id="cartSubtotal">$0.00</span>
          </div>
          <div class="cart-total" style="border-top: none; padding-top: 0;">
            <span class="cart-total-label">Shipping</span>
            <span class="cart-total-amount" id="cartShipping" style="font-size: 1.1rem; color: var(--amber);">Calculated at checkout</span>
          </div>
          <div class="cart-total" style="border-top: 1px solid var(--slate); margin-top: 0.5rem;">
            <span class="cart-total-label" style="font-weight: 600; color: var(--white);">Total</span>
            <span class="cart-total-amount" id="cartTotal">$0.00</span>
          </div>
          
          <!-- Promo Code Input -->
          <div class="promo-code-section">
            <div class="promo-input-wrapper">
              <input type="text" id="promoCodeInput" placeholder="Promo code" maxlength="20">
              <button class="promo-apply-btn" onclick="applyPromoCode()">Apply</button>
            </div>
            <div class="promo-message" id="promoMessage"></div>
            <div class="promo-discount-row" id="promoDiscountRow" style="display: none;">
              <span>Discount (15%)</span>
              <span id="promoDiscountAmount">-$0.00</span>
            </div>
          </div>
          
          <!-- Customer Information Form -->
          <div class="customer-form">
            <p class="crypto-select-title">Your Information</p>
            <div class="form-grid">
              <div class="form-group full-width">
                <label for="fullName">Full Name <span class="required">*</span></label>
                <input type="text" id="fullName" placeholder="John Doe" required>
                <span class="error-msg" id="fullNameError"></span>
              </div>
              <div class="form-group">
                <label for="email">Email Address <span class="required">*</span></label>
                <input type="email" id="email" placeholder="you@example.com" required>
                <span class="error-msg" id="emailError"></span>
              </div>
              <div class="form-group">
                <label for="phone">Phone Number <span class="required">*</span></label>
                <input type="tel" id="phone" placeholder="+1 (555) 123-4567" required>
                <span class="error-msg" id="phoneError"></span>
              </div>
              <div class="form-group full-width">
                <label for="address">Delivery Address <span class="required">*</span></label>
                <div class="address-wrapper">
                  <input type="text" id="address" placeholder="Start typing your address..." autocomplete="off" required>
                  <div class="address-suggestions" id="addressSuggestions"></div>
                </div>
                <span class="error-msg" id="addressError"></span>
              </div>
              <div class="form-group full-width">
                <label for="notes">Special Requests or Notes <span class="optional">(optional)</span></label>
                <textarea id="notes" rows="2" placeholder="Any special delivery instructions, dosage preferences, etc."></textarea>
              </div>
            </div>
          </div>

          <div class="crypto-select">
            <p class="crypto-select-title">Select Payment Method</p>
            <div class="crypto-options">
              <div class="crypto-option" onclick="selectCrypto('btc', 'Bitcoin')" data-crypto="btc">
                <div class="crypto-option-icon" style="background: linear-gradient(135deg, #f7931a, #ffa940);">₿</div>
                <span class="crypto-option-name">Bitcoin</span>
              </div>
              <div class="crypto-option" onclick="selectCrypto('eth', 'Ethereum')" data-crypto="eth">
                <div class="crypto-option-icon" style="background: linear-gradient(135deg, #627eea, #8c9eff);">Ξ</div>
                <span class="crypto-option-name">Ethereum</span>
              </div>
              <div class="crypto-option" onclick="selectCrypto('sol', 'Solana')" data-crypto="sol">
                <div class="crypto-option-icon" style="background: linear-gradient(135deg, #9945ff, #c77dff);">◎</div>
                <span class="crypto-option-name">Solana</span>
              </div>
              <div class="crypto-option" onclick="selectCrypto('usdt-erc', 'USDT (ERC20)')" data-crypto="usdt-erc">
                <div class="crypto-option-icon" style="background: linear-gradient(135deg, #26a17b, #4cceac);">₮</div>
                <span class="crypto-option-name">USDT ERC20</span>
              </div>
              <div class="crypto-option" onclick="selectCrypto('usdt-trc', 'USDT (TRC20)')" data-crypto="usdt-trc">
                <div class="crypto-option-icon" style="background: linear-gradient(135deg, #26a17b, #4cceac);">₮</div>
                <span class="crypto-option-name">USDT TRC20</span>
              </div>
            </div>
          </div>
          <button class="btn btn-primary checkout-btn" id="checkoutBtn" onclick="proceedToPayment()" disabled>
            Select Payment Method
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal-overlay" id="paymentModal">
    <div class="modal">
      <div class="modal-header">
        <button class="modal-back" onclick="goBackToCart()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back
        </button>
        <h2 class="modal-title">Complete Payment</h2>
        <button class="modal-close" onclick="confirmCancelPayment()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="payment-info">
          <div class="payment-timer" id="paymentTimer">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
            <span>Time remaining: <strong id="timerDisplay">59:59</strong></span>
          </div>
          <div class="payment-amount" id="paymentAmount">$0.00</div>
          <div class="payment-breakdown" id="paymentBreakdown"></div>
          <div class="payment-crypto" id="paymentCrypto">via Bitcoin</div>
          
          <!-- Persuasive Stats Section -->
          <div class="trust-stats" id="trustStats"></div>
          
          <div class="qr-container">
            <div id="qrCode"></div>
          </div>
          <div class="wallet-address">
            <span class="wallet-address-text" id="walletAddress">Loading...</span>
            <button class="copy-btn" onclick="copyAddress()">Copy</button>
          </div>
          <div class="tx-input">
            <label for="txId">Transaction ID (optional)</label>
            <input type="text" id="txId" placeholder="Paste your transaction hash here...">
          </div>
          <button class="btn btn-primary checkout-btn" onclick="confirmPayment()">
            I've Sent the Payment
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirmModal">

  <!-- Cancel Confirmation Popup -->
  <div class="cancel-confirm-overlay" id="cancelConfirm">
    <div class="cancel-confirm-box">
      <button class="cancel-confirm-close" onclick="closeCancelAndExit()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
      <div class="cancel-confirm-icon">🎁</div>
      <h3 class="cancel-confirm-title">Order Cancelled</h3>
      <p class="cancel-confirm-text">
        No worries! If you'd like to resubmit your order, head back to your cart and complete checkout.
      </p>
      <p class="cancel-confirm-text" style="margin-top: 1rem; color: var(--orange);">
        Here's <strong>10% OFF</strong> your next order:
      </p>
      <div class="cancel-code-box">
        <span class="cancel-code">NEWYEARS</span>
        <button class="cancel-copy-btn" onclick="copyCancelCode()">Copy</button>
      </div>
      <div class="cancel-confirm-buttons">
        <button class="cancel-btn-okay" onclick="closeCancelAndExit()">Okay, Got It</button>
      </div>
    </div>
  </div>


  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirmModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Order Submitted</h2>
        <button class="modal-close" onclick="closeAllModals()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="confirmation">
          <div class="confirmation-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <h2>Thank you! We received your order</h2>
          <div class="confirmation-messages">
            <p>We'll send confirmation once payment is verified</p>
            <p>You'll receive tracking info when order ships</p>
            <p>Expect delivery within 7-14 business days</p>
          </div>
          <div class="confirmation-warning">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 9v4M12 17h.01"/>
              <circle cx="12" cy="12" r="10"/>
            </svg>
            <p><strong>Important:</strong> If payment is not received within 1 hour, your order will be automatically cancelled.</p>
          </div>
          <button class="btn btn-primary checkout-btn" onclick="closeAllModals()" style="margin-top: 1.5rem;">
            Done
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Deep Dive Overlay -->
  <div class="deep-dive-overlay" id="deepDiveOverlay">
    <div class="deep-dive-container" id="deepDiveContent">
      <!-- Populated by JS -->
    </div>
  </div>

  <script>
    // Snow Animation
    function createSnowflakes() {
      const snowflakes = ['❄', '❅', '❆', '•'];
      const container = document.body;
      
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const snowflake = document.createElement('div');
          snowflake.classList.add('snowflake');
          snowflake.innerHTML = snowflakes[Math.floor(Math.random() * snowflakes.length)];
          snowflake.style.left = Math.random() * 100 + 'vw';
          snowflake.style.fontSize = (Math.random() * 10 + 8) + 'px';
          snowflake.style.opacity = Math.random() * 0.6 + 0.2;
          snowflake.style.animationDuration = (Math.random() * 3 + 4) + 's';
          container.appendChild(snowflake);
          
          setTimeout(() => {
            snowflake.remove();
          }, 7000);
        }, i * 100);
      }
    }
    
    // Run snow on page load
    createSnowflakes();

    // Nav scroll effect
    const nav = document.querySelector('nav');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });

    // Email Signup Functions
    function toggleEmailSignup() {
      const panel = document.getElementById('emailSignupPanel');
      const toggle = document.querySelector('.email-signup-toggle');
      panel.classList.add('active');
      toggle.classList.add('hidden');
      
      // Check if already subscribed
      checkIfSubscribed();
    }

    function closeEmailSignup() {
      const panel = document.getElementById('emailSignupPanel');
      const toggle = document.querySelector('.email-signup-toggle');
      panel.classList.remove('active');
      toggle.classList.remove('hidden');
    }

    function checkIfSubscribed() {
      const subscriberData = localStorage.getItem('decentralmed_subscriber');
      if (subscriberData) {
        const data = JSON.parse(subscriberData);
        const form = document.getElementById('emailSignupForm');
        form.innerHTML = `
          <div class="email-signup-success">
            <div class="checkmark">✅</div>
            <h4>You're Already In!</h4>
            <p>Thanks ${data.name.split(' ')[0]}! You're subscribed with <strong>${data.email}</strong></p>
            <p style="margin-top: 1rem; font-size: 0.85rem;">Watch your inbox for exclusive deals & updates!</p>
          </div>
        `;
      }
    }

    function submitEmailSignup(event) {
      event.preventDefault();
      const name = document.getElementById('signupName').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      
      // Save to localStorage
      localStorage.setItem('decentralmed_subscriber', JSON.stringify({ 
        name, 
        email, 
        subscribedAt: new Date().toISOString() 
      }));
      
      // Send to Google Sheets via Apps Script Web App
      const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyvtJgUow-cuis_MDbgw3t7FumPfVQOt8ifp61mU7Ce_Wk0HlMyYQ3zp6J7--6It2-C/exec';
      
      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, email, timestamp: new Date().toISOString() })
      });
      
      // Show success message
      const form = document.getElementById('emailSignupForm');
      form.innerHTML = `
        <div class="email-signup-success">
          <div class="checkmark">✅</div>
          <h4>You're In!</h4>
          <p>Thanks ${name.split(' ')[0]}! Check your inbox for a welcome surprise.</p>
          <p style="margin-top: 1rem; font-size: 0.85rem;">Watch your inbox for exclusive deals & updates!</p>
        </div>
      `;
      
      // Auto close after 4 seconds
      setTimeout(() => {
        closeEmailSignup();
      }, 4000);
    }

    // Show email signup after 30 seconds on page (only if not subscribed)
    setTimeout(() => {
      const panel = document.getElementById('emailSignupPanel');
      const isSubscribed = localStorage.getItem('decentralmed_subscriber');
      if (!panel.classList.contains('active') && !isSubscribed) {
        toggleEmailSignup();
      }
    }, 30000);

    // Wallet addresses
    const wallets = {
      'btc': 'bc1q08kjmzy5s7gjyl2tmqgwxul4sze6ksz6tkxls0',
      'eth': '0xE8278215d876928935BFe8e54742EE5AC25D909f',
      'sol': '5KcjoqQsQ81m3Ln68mjM52QH4GTbs6wWUC8AwuTLAaj9',
      'usdt-erc': '0xE8278215d876928935BFe8e54742EE5AC25D909f',
      'usdt-trc': 'TWQTaqdAj1ase54skFUH54js6b4orfNznT'
    };

    const cryptoNames = {
      'btc': 'Bitcoin',
      'eth': 'Ethereum',
      'sol': 'Solana',
      'usdt-erc': 'USDT (ERC20)',
      'usdt-trc': 'USDT (TRC20)'
    };

    let cart = [];
    let selectedCrypto = null;
    let customerData = {};
    let paymentTimer = null;
    let timeRemaining = 3600; // 60 minutes in seconds
    let promoApplied = false;
    let promoDiscount = 0;
    const PROMO_CODE = 'NEWYEARS';
    const PROMO_PERCENT = 15;

    // Form validation
    function validateForm() {
      let isValid = true;
      const fields = [
        { id: 'fullName', name: 'Full name', type: 'text' },
        { id: 'email', name: 'Email', type: 'email' },
        { id: 'phone', name: 'Phone number', type: 'phone' },
        { id: 'address', name: 'Delivery address', type: 'text' }
      ];

      fields.forEach(field => {
        const input = document.getElementById(field.id);
        const error = document.getElementById(field.id + 'Error');
        const value = input.value.trim();

        input.classList.remove('error', 'valid');
        error.textContent = '';

        if (!value) {
          input.classList.add('error');
          error.textContent = `${field.name} is required`;
          isValid = false;
        } else if (field.type === 'email' && !isValidEmail(value)) {
          input.classList.add('error');
          error.textContent = 'Please enter a valid email';
          isValid = false;
        } else if (field.type === 'phone' && !isValidPhone(value)) {
          input.classList.add('error');
          error.textContent = 'Please enter a valid phone number';
          isValid = false;
        } else {
          input.classList.add('valid');
        }
      });

      return isValid;
    }

    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPhone(phone) {
      const digits = phone.replace(/\D/g, '');
      return digits.length >= 7;
    }

    function collectCustomerData() {
      customerData = {
        fullName: document.getElementById('fullName').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        address: document.getElementById('address').value.trim(),
        notes: document.getElementById('notes').value.trim()
      };
    }

    function setupFormValidation() {
      const inputs = ['fullName', 'email', 'phone', 'address'];
      inputs.forEach(id => {
        const input = document.getElementById(id);
        input.addEventListener('blur', () => {
          validateSingleField(id);
          updateCheckoutButton();
        });
        input.addEventListener('input', () => {
          input.classList.remove('error');
          document.getElementById(id + 'Error').textContent = '';
          updateCheckoutButton();
          
          // Recalculate shipping when address changes
          if (id === 'address') {
            clearTimeout(addressTimeout);
            addressTimeout = setTimeout(onAddressChange, 500);
          }
        });
      });
    }

    function validateSingleField(id) {
      const input = document.getElementById(id);
      const error = document.getElementById(id + 'Error');
      const value = input.value.trim();

      input.classList.remove('error', 'valid');
      error.textContent = '';

      if (!value) {
        return false;
      }

      if (id === 'email' && !isValidEmail(value)) {
        input.classList.add('error');
        error.textContent = 'Please enter a valid email';
        return false;
      }

      if (id === 'phone' && !isValidPhone(value)) {
        input.classList.add('error');
        error.textContent = 'Please enter a valid phone number';
        return false;
      }

      input.classList.add('valid');
      return true;
    }

    function isFormFilled() {
      const required = ['fullName', 'email', 'phone', 'address'];
      return required.every(id => document.getElementById(id).value.trim() !== '');
    }

    function updateCheckoutButton() {
      const btn = document.getElementById('checkoutBtn');
      const formFilled = isFormFilled();
      const cryptoSelected = selectedCrypto !== null;

      if (!formFilled) {
        btn.disabled = true;
        btn.textContent = 'Fill in your details above';
      } else if (!cryptoSelected) {
        btn.disabled = true;
        btn.textContent = 'Select payment method';
      } else {
        btn.disabled = false;
        btn.textContent = `Pay with ${cryptoNames[selectedCrypto]}`;
      }
    }

    document.addEventListener('DOMContentLoaded', setupFormValidation);

    // ============================================
    // Address Autocomplete (Geoapify - Free)
    // ============================================
    const GEOAPIFY_API_KEY = '6bbc6ef9136541b1be7d64f1e2b6cf97';
    let addressTimeout = null;
    let manualMode = false;

    function setupAddressAutocomplete() {
      const addressInput = document.getElementById('address');
      const suggestionsContainer = document.getElementById('addressSuggestions');
      
      if (!addressInput || !suggestionsContainer) return;

      addressInput.addEventListener('input', function() {
        if (manualMode) return;
        
        const query = this.value.trim();
        
        if (addressTimeout) clearTimeout(addressTimeout);
        
        if (query.length < 3) {
          suggestionsContainer.classList.remove('active');
          return;
        }

        addressTimeout = setTimeout(() => {
          fetchAddressSuggestions(query);
        }, 300);
      });

      document.addEventListener('click', function(e) {
        if (!e.target.closest('.address-wrapper')) {
          suggestionsContainer.classList.remove('active');
        }
      });
    }

    async function fetchAddressSuggestions(query) {
      const suggestionsContainer = document.getElementById('addressSuggestions');
      
      suggestionsContainer.innerHTML = '<div class="address-loading">Searching...</div>';
      suggestionsContainer.classList.add('active');

      try {
        const response = await fetch(
          `https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(query)}&apiKey=${GEOAPIFY_API_KEY}&limit=5&format=json`
        );
        
        const data = await response.json();

        let suggestionsHTML = '';

        if (data.results && data.results.length > 0) {
          suggestionsHTML = data.results.map(result => {
            const main = result.address_line1 || result.name || result.formatted.split(',')[0];
            const secondary = result.address_line2 || result.formatted.split(',').slice(1).join(',').trim();
            const fullAddress = result.formatted;
            
            return `
              <div class="address-suggestion" onclick="selectAddress('${fullAddress.replace(/'/g, "\\'")}')">
                <div class="address-suggestion-main">${main}</div>
                <div class="address-suggestion-secondary">${secondary}</div>
              </div>
            `;
          }).join('');
        }

        suggestionsHTML += `
          <div class="address-suggestion manual-entry" onclick="enableManualEntry()">
            <div class="address-suggestion-main">✏️ Enter address manually</div>
            <div class="address-suggestion-secondary">Type your full address if not found above</div>
          </div>
        `;

        if (!data.results || data.results.length === 0) {
          suggestionsHTML = `
            <div class="address-loading">No addresses found for "${query}"</div>
            <div class="address-suggestion manual-entry" onclick="enableManualEntry()">
              <div class="address-suggestion-main">✏️ Enter address manually</div>
              <div class="address-suggestion-secondary">Type your full address</div>
            </div>
          `;
        }

        suggestionsContainer.innerHTML = suggestionsHTML;
      } catch (error) {
        suggestionsContainer.innerHTML = `
          <div class="address-loading">Could not load suggestions</div>
          <div class="address-suggestion manual-entry" onclick="enableManualEntry()">
            <div class="address-suggestion-main">✏️ Enter address manually</div>
            <div class="address-suggestion-secondary">Type your full address</div>
          </div>
        `;
      }
    }

    function selectAddress(address) {
      const addressInput = document.getElementById('address');
      const suggestionsContainer = document.getElementById('addressSuggestions');
      
      addressInput.value = address;
      suggestionsContainer.classList.remove('active');
      manualMode = false;
      
      validateSingleField('address');
      updateCheckoutButton();
      
      // Calculate shipping based on address
      onAddressChange();
    }

    function enableManualEntry() {
      const addressInput = document.getElementById('address');
      const suggestionsContainer = document.getElementById('addressSuggestions');
      
      manualMode = true;
      suggestionsContainer.classList.remove('active');
      addressInput.placeholder = 'Enter full address: Street, City, State, ZIP, Country';
      addressInput.focus();
      
      const wrapper = addressInput.closest('.address-wrapper');
      let manualBadge = wrapper.querySelector('.manual-badge');
      if (!manualBadge) {
        manualBadge = document.createElement('div');
        manualBadge.className = 'manual-badge';
        manualBadge.innerHTML = '✏️ Manual entry mode - <a href="#" onclick="disableManualEntry(); return false;">use autocomplete</a>';
        wrapper.appendChild(manualBadge);
      }
    }

    function disableManualEntry() {
      const addressInput = document.getElementById('address');
      const wrapper = addressInput.closest('.address-wrapper');
      const manualBadge = wrapper.querySelector('.manual-badge');
      
      manualMode = false;
      addressInput.placeholder = 'Start typing your address...';
      if (manualBadge) manualBadge.remove();
    }

    document.addEventListener('DOMContentLoaded', setupAddressAutocomplete);

    // ============================================
    // Smart Shipping Calculator
    // US = Flat $9.99 (FREE over $75)
    // International = EasyPost calculated
    // ============================================
    let currentShipping = 0;
    let isInternational = false;
    let shippingCalculated = false;

    function detectCountry(address) {
      const addr = address.toLowerCase();
      const usIndicators = [
        'united states', 'usa', ', us', ' us ', 
        /\b(al|ak|az|ar|ca|co|ct|de|fl|ga|hi|id|il|in|ia|ks|ky|la|me|md|ma|mi|mn|ms|mo|mt|ne|nv|nh|nj|nm|ny|nc|nd|oh|ok|or|pa|ri|sc|sd|tn|tx|ut|vt|va|wa|wv|wi|wy)\b.*\d{5}/,
        /\d{5}(-\d{4})?$/ // US ZIP code pattern
      ];
      
      const intlIndicators = [
        'canada', 'uk', 'united kingdom', 'australia', 'germany', 'france', 
        'mexico', 'brazil', 'india', 'japan', 'china', 'spain', 'italy',
        'netherlands', 'sweden', 'norway', 'denmark', 'finland', 'ireland',
        'new zealand', 'singapore', 'hong kong', 'south korea', 'taiwan'
      ];
      
      // Check for international first
      for (const country of intlIndicators) {
        if (addr.includes(country)) {
          return 'international';
        }
      }
      
      // Check for US indicators
      for (const indicator of usIndicators) {
        if (typeof indicator === 'string') {
          if (addr.includes(indicator)) return 'us';
        } else if (indicator.test(addr)) {
          return 'us';
        }
      }
      
      // Default to US if has 5-digit zip
      if (/\b\d{5}\b/.test(address)) return 'us';
      
      return 'unknown';
    }

    async function calculateShipping() {
      const address = document.getElementById('address').value.trim();
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      if (!address || cart.length === 0) {
        updateShippingDisplay(0, false);
        return;
      }
      
      const country = detectCountry(address);
      
      if (country === 'us' || country === 'unknown') {
        // US: Flat rate $9.99, FREE over $75
        isInternational = false;
        currentShipping = subtotal >= 75 ? 0 : 9.99;
        shippingCalculated = true;
        updateShippingDisplay(currentShipping, false);
      } else {
        // International: Calculate with EasyPost
        isInternational = true;
        updateShippingDisplay(0, true, 'Calculating...');
        
        try {
          const intlRate = await getInternationalShipping(address);
          currentShipping = intlRate;
          shippingCalculated = true;
          updateShippingDisplay(currentShipping, false);
        } catch (error) {
          // Fallback to flat international rate
          currentShipping = 24.99;
          shippingCalculated = true;
          updateShippingDisplay(currentShipping, false);
        }
      }
      
      updateCartTotals();
    }

    async function getInternationalShipping(address) {
      // EasyPost API for international shipping
      // Note: In production, this should go through your backend to hide API key
      // For now, using a flat international rate based on region
      
      const addr = address.toLowerCase();
      
      // Tiered international rates (you can adjust these)
      if (addr.includes('canada') || addr.includes('mexico')) {
        return 14.99; // North America
      } else if (addr.includes('uk') || addr.includes('united kingdom') || 
                 addr.includes('germany') || addr.includes('france') || 
                 addr.includes('spain') || addr.includes('italy') ||
                 addr.includes('netherlands') || addr.includes('ireland')) {
        return 19.99; // Europe
      } else if (addr.includes('australia') || addr.includes('new zealand')) {
        return 24.99; // Oceania
      } else {
        return 29.99; // Rest of world
      }
    }

    function updateShippingDisplay(amount, loading = false, loadingText = '') {
      const shippingEl = document.getElementById('cartShipping');
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      if (loading) {
        shippingEl.textContent = loadingText || 'Calculating...';
        shippingEl.style.color = '#ff6b00';
      } else if (amount === 0 && subtotal >= 75 && !isInternational) {
        shippingEl.textContent = 'FREE 🎉';
        shippingEl.style.color = '#00ff88';
      } else if (amount === 0) {
        shippingEl.textContent = 'Enter address';
        shippingEl.style.color = '';
      } else {
        shippingEl.textContent = '$' + amount.toFixed(2);
        if (isInternational) {
          shippingEl.textContent += ' (Intl)';
        }
        shippingEl.style.color = '';
      }
    }

    function updateCartTotals() {
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      // Update promo discount if applied
      if (promoApplied) {
        promoDiscount = subtotal * (PROMO_PERCENT / 100);
        document.getElementById('promoDiscountAmount').textContent = '-$' + promoDiscount.toFixed(2);
      }
      
      const total = subtotal - promoDiscount + currentShipping;
      
      document.getElementById('cartSubtotal').textContent = '$' + subtotal.toFixed(2);
      document.getElementById('cartTotal').textContent = '$' + total.toFixed(2);
    }

    // Recalculate shipping when address changes
    function onAddressChange() {
      shippingCalculated = false;
      calculateShipping();
    }

    function addToCart(name, price, icon) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon, qty: 1 });
      }
      updateCartCount();
      
      // Fancy add to cart animation
      showAddToCartAnimation(icon, event);
    }

    function showAddToCartAnimation(icon, e) {
      const btn = e.target.closest('.add-to-cart');
      const cartBtn = document.querySelector('.cart-btn');
      const cartCount = document.getElementById('cartCount');
      const flyingItem = document.getElementById('flyingItem');
      
      // Button scale effect
      btn.style.transform = 'scale(1.2)';
      setTimeout(() => btn.style.transform = '', 200);
      
      // Flying item animation
      if (btn) {
        const btnRect = btn.getBoundingClientRect();
        const cartRect = cartBtn.getBoundingClientRect();
        
        flyingItem.textContent = icon;
        flyingItem.style.left = btnRect.left + 'px';
        flyingItem.style.top = btnRect.top + 'px';
        flyingItem.style.setProperty('--endX', (cartRect.left - btnRect.left) + 'px');
        flyingItem.style.setProperty('--endY', (cartRect.top - btnRect.top) + 'px');
        
        flyingItem.classList.remove('animate');
        void flyingItem.offsetWidth; // Trigger reflow
        flyingItem.classList.add('animate');
      }
      
      // Cart button pulse
      cartBtn.classList.remove('pulse');
      void cartBtn.offsetWidth;
      cartBtn.classList.add('pulse');
      
      // Cart count bump
      cartCount.classList.remove('bump');
      void cartCount.offsetWidth;
      cartCount.classList.add('bump');
    }

    // Sildenafil dose selection
    const sildenafilPrices = {
      '25': 34.99,
      '50': 45.99,
      '100': 57.99,
      '200': 68.99
    };
    
    let selectedSildenafilDose = '50'; // Default

    function selectSildenafilDoseBtn(dose) {
      selectedSildenafilDose = dose;
      const price = sildenafilPrices[dose];
      document.getElementById('sildenafil-price').innerHTML = `$${price.toFixed(2)} <span>/60 pills</span>`;
      
      // Update button states
      document.querySelectorAll('.sildenafil-dose-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.dose === dose) {
          btn.classList.add('active');
        }
      });
    }

    function selectDose(product, dose) {
      if (product === 'sildenafil') {
        selectSildenafilDoseBtn(dose);
      }
    }

    function updateSildenafilPrice() {
      const price = sildenafilPrices[selectedSildenafilDose];
      document.getElementById('sildenafil-price').innerHTML = `$${price.toFixed(2)} <span>/60 pills</span>`;
    }

    function addSildenafilToCart() {
      const dose = selectedSildenafilDose;
      const price = sildenafilPrices[dose];
      const name = `Sildenafil ${dose}mg (60 pills)`;
      
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon: '⚡', qty: 1 });
      }
      updateCartCount();
      
      // Fancy add to cart animation
      showAddToCartAnimation('⚡', event);
    }

    // Minoxidil dose selection
    let selectedMinoxidilDose = '2.5';
    const minoxidilPrices = {
      '2.5': 24.99,
      '5': 29.99
    };

    function selectMinoxidilDoseBtn(dose) {
      selectedMinoxidilDose = dose;
      const price = minoxidilPrices[dose];
      document.getElementById('minoxidil-price').innerHTML = `$${price.toFixed(2)} <span>/90 pills</span>`;
      
      // Update button states
      document.querySelectorAll('.minoxidil-dose-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.dose === dose) {
          btn.classList.add('active');
        }
      });
    }

    function selectMinoxidilDose(dose) {
      selectMinoxidilDoseBtn(dose);
    }

    function updateMinoxidilPrice() {
      const price = minoxidilPrices[selectedMinoxidilDose];
      document.getElementById('minoxidil-price').innerHTML = `$${price.toFixed(2)} <span>/90 pills</span>`;
    }

    function addMinoxidilToCart() {
      const dose = selectedMinoxidilDose;
      const price = minoxidilPrices[dose];
      const name = `Minoxidil ${dose}mg (90 pills)`;
      
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon: '🧴', qty: 1 });
      }
      updateCartCount();
      
      // Fancy add to cart animation
      showAddToCartAnimation('🧴', event);
    }

    // Tadalafil Dose Functions
    const tadalafilPrices = {
      '2.5': 29.99,
      '5': 39.99,
      '10': 49.99,
      '20': 59.99,
      '40': 74.99,
      '60': 89.99,
      '80': 99.99
    };

    let selectedTadalafilDose = '5';

    function selectTadalafilDoseBtn(dose) {
      selectedTadalafilDose = dose;
      const price = tadalafilPrices[dose];
      document.getElementById('tadalafil-price').innerHTML = `$${price.toFixed(2)} <span>/60 pills</span>`;
      
      // Update button states
      document.querySelectorAll('.tadalafil-dose-btn, .tadalafil-dose-btn-adv').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.dose === dose) {
          btn.classList.add('active');
        }
      });
    }

    function selectTadalafilDose() {
      // Legacy function for dropdown - keeping for compatibility
      const select = document.getElementById('tadalafil-dose');
      if (select) {
        const dose = select.value;
        const price = tadalafilPrices[dose];
        document.getElementById('tadalafil-price').innerHTML = `$${price.toFixed(2)} <span>/60 pills</span>`;
        selectedTadalafilDose = dose;
      }
    }

    function addTadalafilToCart() {
      const dose = selectedTadalafilDose;
      const price = tadalafilPrices[dose];
      const name = `Tadalafil ${dose}mg (60 pills)`;
      
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon: '💊', qty: 1 });
      }
      updateCartCount();
      
      // Fancy add to cart animation
      showAddToCartAnimation('💊', event);
    }

    // Promo Code Functions
    function applyPromoCode() {
      const input = document.getElementById('promoCodeInput');
      const message = document.getElementById('promoMessage');
      const discountRow = document.getElementById('promoDiscountRow');
      const code = input.value.trim().toUpperCase();
      
      if (code === PROMO_CODE && !promoApplied) {
        promoApplied = true;
        message.textContent = '✓ Promo code applied successfully!';
        message.className = 'promo-message success';
        discountRow.style.display = 'flex';
        input.disabled = true;
        input.style.opacity = '0.6';
        document.querySelector('.promo-apply-btn').textContent = 'Applied';
        document.querySelector('.promo-apply-btn').style.background = '#22c55e';
        document.querySelector('.promo-apply-btn').disabled = true;
        updateCartTotalsWithPromo();
      } else if (code === PROMO_CODE && promoApplied) {
        message.textContent = 'Promo code already applied';
        message.className = 'promo-message error';
      } else if (code === '') {
        message.textContent = 'Please enter a promo code';
        message.className = 'promo-message error';
      } else {
        message.textContent = 'Invalid promo code';
        message.className = 'promo-message error';
        input.value = '';
      }
    }

    function updateCartTotalsWithPromo() {
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      if (promoApplied) {
        promoDiscount = subtotal * (PROMO_PERCENT / 100);
        document.getElementById('promoDiscountAmount').textContent = '-$' + promoDiscount.toFixed(2);
        document.getElementById('promoDiscountRow').style.display = 'flex';
      } else {
        promoDiscount = 0;
        document.getElementById('promoDiscountRow').style.display = 'none';
      }
      
      const shipping = shippingCalculated ? currentShipping : 0;
      const total = subtotal - promoDiscount + shipping;
      
      document.getElementById('cartSubtotal').textContent = '$' + subtotal.toFixed(2);
      document.getElementById('cartTotal').textContent = '$' + total.toFixed(2);
    }

    function resetPromoCode() {
      promoApplied = false;
      promoDiscount = 0;
      const input = document.getElementById('promoCodeInput');
      const message = document.getElementById('promoMessage');
      const discountRow = document.getElementById('promoDiscountRow');
      const applyBtn = document.querySelector('.promo-apply-btn');
      
      if (input) {
        input.value = '';
        input.disabled = false;
        input.style.opacity = '1';
      }
      if (message) message.textContent = '';
      if (discountRow) discountRow.style.display = 'none';
      if (applyBtn) {
        applyBtn.textContent = 'Apply';
        applyBtn.style.background = '';
        applyBtn.disabled = false;
      }
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById('cartCount').textContent = count;
    }

    function renderCart() {
      const container = document.getElementById('cartItems');
      const footer = document.getElementById('cartFooter');
      
      if (cart.length === 0) {
        container.innerHTML = '<div class="cart-empty">Your cart is empty</div>';
        footer.style.display = 'none';
        return;
      }

      container.innerHTML = cart.map((item, index) => `
        <div class="cart-item">
          <div class="cart-item-image">${item.icon}</div>
          <div class="cart-item-details">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-price">$${item.price.toFixed(2)} each</div>
          </div>
          <div class="cart-item-qty">
            <button class="qty-btn" onclick="updateQty(${index}, -1)">−</button>
            <span>${item.qty}</span>
            <button class="qty-btn" onclick="updateQty(${index}, 1)">+</button>
          </div>
        </div>
      `).join('');

      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      
      document.getElementById('cartSubtotal').textContent = '$' + subtotal.toFixed(2);
      
      // Update promo discount if applied
      if (promoApplied) {
        promoDiscount = subtotal * (PROMO_PERCENT / 100);
        document.getElementById('promoDiscountAmount').textContent = '-$' + promoDiscount.toFixed(2);
        document.getElementById('promoDiscountRow').style.display = 'flex';
      }
      
      // Reset shipping display - will be calculated when address is entered
      if (!shippingCalculated) {
        document.getElementById('cartShipping').textContent = 'Enter address';
        document.getElementById('cartShipping').style.color = '';
        const total = subtotal - promoDiscount;
        document.getElementById('cartTotal').textContent = '$' + total.toFixed(2);
      } else {
        updateCartTotals();
        updateShippingDisplay(currentShipping, false);
      }
      
      footer.style.display = 'block';
      
      updateCheckoutButton();
    }

    function updateQty(index, delta) {
      cart[index].qty += delta;
      if (cart[index].qty <= 0) {
        cart.splice(index, 1);
      }
      updateCartCount();
      renderCart();
    }

    function selectCrypto(crypto, name) {
      selectedCrypto = crypto;
      document.querySelectorAll('.crypto-option').forEach(el => {
        el.classList.remove('selected');
      });
      document.querySelector(`[data-crypto="${crypto}"]`).classList.add('selected');
      updateCheckoutButton();
    }

    function openCart() {
      renderCart();
      document.getElementById('cartModal').classList.add('active');
      document.body.classList.add('modal-open');
    }

    function closeModal(id) {
      document.getElementById(id).classList.remove('active');
      // Only unlock scroll if no other modals are open
      const openModals = document.querySelectorAll('.modal-overlay.active');
      if (openModals.length === 0) {
        document.body.classList.remove('modal-open');
      }
    }

    function closeAllModals() {
      document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
      document.body.classList.remove('modal-open');
      
      // Stop payment timer
      stopPaymentTimer();
      
      // Reset promo code
      resetPromoCode();
      
      cart = [];
      selectedCrypto = null;
      customerData = {};
      currentShipping = 0;
      isInternational = false;
      shippingCalculated = false;
      updateCartCount();
      
      ['fullName', 'email', 'phone', 'address', 'notes', 'txId'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          el.value = '';
          el.classList.remove('error', 'valid');
        }
        const err = document.getElementById(id + 'Error');
        if (err) err.textContent = '';
      });
      
      // Remove manual badge if present
      const manualBadge = document.querySelector('.manual-badge');
      if (manualBadge) manualBadge.remove();
      manualMode = false;
      
      document.querySelectorAll('.crypto-option').forEach(el => {
        el.classList.remove('selected');
      });
    }

    function proceedToPayment() {
      if (!selectedCrypto) return;
      if (!validateForm()) {
        const firstError = document.querySelector('.form-group input.error, .form-group textarea.error');
        if (firstError) firstError.focus();
        return;
      }
      
      collectCustomerData();
      
      document.getElementById('cartModal').classList.remove('active');
      
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const discount = promoApplied ? subtotal * (PROMO_PERCENT / 100) : 0;
      const shipping = currentShipping;
      const total = subtotal - discount + shipping;
      
      document.getElementById('paymentAmount').textContent = '$' + total.toFixed(2);
      
      // Payment breakdown
      let breakdownHTML = `
        <div class="payment-breakdown-row">
          <span>Subtotal</span>
          <span>$${subtotal.toFixed(2)}</span>
        </div>
      `;
      
      if (promoApplied) {
        breakdownHTML += `
        <div class="payment-breakdown-row" style="color: #22c55e;">
          <span>Discount (${PROMO_PERCENT}% - ${PROMO_CODE})</span>
          <span>-$${discount.toFixed(2)}</span>
        </div>
        `;
      }
      
      breakdownHTML += `
        <div class="payment-breakdown-row ${shipping === 0 ? 'free-shipping' : 'shipping'}">
          <span>Shipping${isInternational ? ' (International)' : ''}</span>
          <span>${shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2)}</span>
        </div>
        <div class="payment-breakdown-row total">
          <span>Total</span>
          <span>$${total.toFixed(2)}</span>
        </div>
      `;
      document.getElementById('paymentBreakdown').innerHTML = breakdownHTML;
      
      document.getElementById('paymentCrypto').textContent = 'via ' + cryptoNames[selectedCrypto];
      document.getElementById('walletAddress').textContent = wallets[selectedCrypto];
      
      // Generate trust stats based on cart items
      generateTrustStats();
      
      const qrContainer = document.getElementById('qrCode');
      qrContainer.innerHTML = '';
      new QRCode(qrContainer, {
        text: wallets[selectedCrypto],
        width: 180,
        height: 180,
        colorDark: '#000000',
        colorLight: '#ffffff',
        correctLevel: QRCode.CorrectLevel.H
      });
      
      document.getElementById('paymentModal').classList.add('active');
      
      // Start the payment timer
      startPaymentTimer();
    }

    function startPaymentTimer() {
      // Reset timer
      timeRemaining = 3600; // 60 minutes
      updateTimerDisplay();
      
      // Clear any existing timer
      if (paymentTimer) clearInterval(paymentTimer);
      
      paymentTimer = setInterval(() => {
        timeRemaining--;
        updateTimerDisplay();
        
        // Warning state when under 5 minutes
        if (timeRemaining <= 300) {
          document.getElementById('paymentTimer').classList.add('warning');
        }
        
        // Time's up
        if (timeRemaining <= 0) {
          clearInterval(paymentTimer);
          handleTimerExpired();
        }
      }, 1000);
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(timeRemaining / 60);
      const seconds = timeRemaining % 60;
      const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('timerDisplay').textContent = display;
    }

    function stopPaymentTimer() {
      if (paymentTimer) {
        clearInterval(paymentTimer);
        paymentTimer = null;
      }
      document.getElementById('paymentTimer').classList.remove('warning');
    }

    function handleTimerExpired() {
      // Clear cart and reset
      cart = [];
      selectedCrypto = null;
      customerData = {};
      updateCartCount();
      
      // Close payment modal
      document.getElementById('paymentModal').classList.remove('active');
      document.body.classList.remove('modal-open');
      
      // Show expired message
      alert('Your order has been automatically cancelled due to payment timeout. Please try again.');
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function generateTrustStats() {
      const hasED = cart.some(item => 
        item.name.toLowerCase().includes('tadalafil') || 
        item.name.toLowerCase().includes('sildenafil')
      );
      const hasHairLoss = cart.some(item => 
        item.name.toLowerCase().includes('finasteride') || 
        item.name.toLowerCase().includes('minoxidil') ||
        item.name.toLowerCase().includes('dutasteride')
      );

      let statsHTML = '<div class="trust-stats-title">💡 Why You\'re Making the Right Choice</div>';

      if (hasED) {
        statsHTML += `
          <div class="trust-stat-item">
            <span class="trust-stat-icon">📊</span>
            <span class="trust-stat-text"><strong>52% of men</strong> experience ED at some point. You're taking control of your health like millions of others.</span>
          </div>
          <div class="trust-stat-item">
            <span class="trust-stat-icon">✅</span>
            <span class="trust-stat-text">Clinical studies show <span class="highlight">81% success rate</span> with PDE5 inhibitors like Tadalafil & Sildenafil.</span>
          </div>
          <div class="trust-stat-item">
            <span class="trust-stat-icon">💪</span>
            <span class="trust-stat-text">Men report <strong>significant improvement</strong> in confidence and relationship satisfaction within 2 weeks.</span>
          </div>
        `;
      }

      if (hasHairLoss) {
        statsHTML += `
          <div class="trust-stat-item">
            <span class="trust-stat-icon">📊</span>
            <span class="trust-stat-text"><strong>85% of men</strong> experience hair thinning by age 50. Early treatment = best results.</span>
          </div>
          <div class="trust-stat-item">
            <span class="trust-stat-icon">✅</span>
            <span class="trust-stat-text">Finasteride shows <span class="highlight">90% success rate</span> in stopping further hair loss within 3-6 months.</span>
          </div>
          <div class="trust-stat-item">
            <span class="trust-stat-icon">🔬</span>
            <span class="trust-stat-text"><strong>66% of men</strong> see visible regrowth when combining Finasteride + Minoxidil.</span>
          </div>
        `;
      }

      if (hasED && hasHairLoss) {
        statsHTML += `
          <div class="trust-stat-item">
            <span class="trust-stat-icon">🏆</span>
            <span class="trust-stat-text">You're tackling <strong>both issues</strong> — men who treat multiple concerns report <span class="highlight">3x higher satisfaction</span> with their health journey.</span>
          </div>
        `;
      }

      document.getElementById('trustStats').innerHTML = statsHTML;
    }

    // Back to cart function
    function goBackToCart() {
      document.getElementById('paymentModal').classList.remove('active');
      renderCart();
      document.getElementById('cartModal').classList.add('active');
    }

    // Cancel confirmation functions
    function confirmCancelPayment() {
      // Stop timer and close payment modal
      stopPaymentTimer();
      document.getElementById('paymentModal').classList.remove('active');
      document.body.classList.remove('modal-open');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function closeCancelConfirm() {
      document.getElementById('cancelConfirm').classList.remove('active');
    }

    function closeCancelAndExit() {
      document.getElementById('cancelConfirm').classList.remove('active');
      document.body.classList.remove('modal-open');
      // Keep cart items but return to browsing
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function copyCancelCode() {
      navigator.clipboard.writeText('NEWYEARS');
      const btn = document.querySelector('.cancel-copy-btn');
      btn.textContent = 'Copied!';
      btn.style.background = '#22c55e';
      setTimeout(() => {
        btn.textContent = 'Copy';
        btn.style.background = '';
      }, 2000);
    }

    function confirmCancelOrder() {
      document.getElementById('cancelConfirm').classList.remove('active');
      document.getElementById('paymentModal').classList.remove('active');
      document.body.classList.remove('modal-open');
      // Stop payment timer
      stopPaymentTimer();
      // Keep cart items but return to browsing
    }

    function copyAddress() {
      const address = document.getElementById('walletAddress').textContent;
      navigator.clipboard.writeText(address);
      
      const btn = document.querySelector('.copy-btn');
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'Copy';
        btn.classList.remove('copied');
      }, 2000);
    }

    function confirmPayment() {
      // Stop the payment timer
      stopPaymentTimer();
      
      const txId = document.getElementById('txId').value.trim();
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const shipping = currentShipping;
      const total = subtotal + shipping;
      
      const orderData = {
        customer: customerData,
        items: cart.map(item => ({
          name: item.name,
          price: item.price,
          quantity: item.qty,
          subtotal: item.price * item.qty
        })),
        subtotal: subtotal,
        shipping: shipping,
        total: total,
        payment: {
          method: cryptoNames[selectedCrypto],
          wallet: wallets[selectedCrypto],
          transactionId: txId || 'Not provided'
        },
        orderDate: new Date().toISOString(),
        orderId: 'DM-' + Date.now()
      };
      
      const orderSummary = `
ORDER ID: ${orderData.orderId}
DATE: ${new Date(orderData.orderDate).toLocaleString()}

CUSTOMER INFO:
- Name: ${orderData.customer.fullName}
- Email: ${orderData.customer.email}
- Phone: ${orderData.customer.phone}
- Address: ${orderData.customer.address}
- Notes: ${orderData.customer.notes || 'None'}

ITEMS:
${orderData.items.map(item => `- ${item.name} x${item.quantity} = $${item.subtotal.toFixed(2)}`).join('\n')}

SUBTOTAL: $${orderData.subtotal.toFixed(2)}
SHIPPING: ${orderData.shipping === 0 ? 'FREE' : '$' + orderData.shipping.toFixed(2)}
TOTAL: $${orderData.total.toFixed(2)}

PAYMENT:
- Method: ${orderData.payment.method}
- Wallet: ${orderData.payment.wallet}
- TX ID: ${orderData.payment.transactionId}
      `.trim();

      // ============================================
      // PRODUCTION MODE - Disable console logging
      // ============================================
      const isProd = true;
      if (isProd) {
        console.log = function() {};
        console.error = function() {};
        console.warn = function() {};
      }

      // ============================================
      // OPTION 1: EmailJS - ACTIVE ✓
      // ============================================
      emailjs.init("XkgbEFRscoQ0vNYIU");
      
      // Email 1: Order notification to YOU (admin)
      emailjs.send("service_0z30pmc", "template_aommm51", {
        to_email: "decentralmed.orders@doermail.org",
        reply_to: orderData.customer.email,
        from_name: "Decentral Med Orders",
        order_id: orderData.orderId,
        customer_name: orderData.customer.fullName,
        customer_email: orderData.customer.email,
        customer_phone: orderData.customer.phone,
        customer_address: orderData.customer.address,
        customer_notes: orderData.customer.notes || 'None',
        order_items: orderData.items.map(i => `${i.name} x${i.quantity} = $${i.subtotal.toFixed(2)}`).join('\n'),
        order_total: '$' + orderData.total.toFixed(2),
        payment_method: orderData.payment.method,
        payment_wallet: orderData.payment.wallet,
        transaction_id: orderData.payment.transactionId,
        order_date: new Date(orderData.orderDate).toLocaleString(),
        order_summary: orderSummary
      }).then(
        (response) => {},
        (error) => {}
      );

      // Email 2: Order confirmation to CUSTOMER
      emailjs.send("service_mcxickt", "template_customer", {
        to_email: orderData.customer.email,
        customer_name: orderData.customer.fullName,
        order_id: orderData.orderId,
        order_items: orderData.items.map(i => `${i.name} x${i.quantity} = $${i.subtotal.toFixed(2)}`).join('\n'),
        order_total: '$' + orderData.total.toFixed(2),
        payment_method: orderData.payment.method,
        payment_wallet: orderData.payment.wallet,
        order_date: new Date(orderData.orderDate).toLocaleString(),
        delivery_address: orderData.customer.address
      }).then(
        (response) => {},
        (error) => {}
      );

      // ============================================
      // OPTION 2: Google Sheets - ACTIVE ✓
      // ============================================
      fetch('https://script.google.com/macros/s/AKfycbwdL_JbbzD8mZOSlqQkzq08iV7KEKHcZ5eUiYMYPV2h2o6a1drCIlgGr_vcM28ByQS8/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(orderData)
      }).then(
        () => {},
        (error) => {}
      );

      // ============================================
      // OPTION 3: Telegram Bot - ACTIVE ✓
      // ============================================
      const TELEGRAM_BOT_TOKEN = '8583517222:AAFn5geWAw9pJ22cZgSSteXlCJojWSPg6wM';
      const TELEGRAM_CHAT_ID = '7693103350';
      
      const telegramMessage = `
🛒 <b>NEW ORDER!</b>

📋 <b>Order ID:</b> ${orderData.orderId}
📅 <b>Date:</b> ${new Date(orderData.orderDate).toLocaleString()}

👤 <b>CUSTOMER</b>
• Name: ${orderData.customer.fullName}
• Email: ${orderData.customer.email}
• Phone: ${orderData.customer.phone}
• Address: ${orderData.customer.address}
• Notes: ${orderData.customer.notes || 'None'}

📦 <b>ITEMS</b>
${orderData.items.map(item => `• ${item.name} x${item.quantity} = $${item.subtotal.toFixed(2)}`).join('\n')}

💵 <b>Subtotal:</b> $${orderData.subtotal.toFixed(2)}
🚚 <b>Shipping:</b> ${orderData.shipping === 0 ? 'FREE' : '$' + orderData.shipping.toFixed(2)}
💰 <b>TOTAL: $${orderData.total.toFixed(2)}</b>

💳 <b>PAYMENT</b>
• Method: ${orderData.payment.method}
• TX ID: ${orderData.payment.transactionId}
      `.trim();

      fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: TELEGRAM_CHAT_ID,
          text: telegramMessage,
          parse_mode: 'HTML'
        })
      }).then(
        () => {},
        (error) => {}
      );

      document.getElementById('paymentModal').classList.remove('active');
      document.getElementById('confirmModal').classList.add('active');
      // Keep body scroll locked for confirmation modal
    }

    // Close modals on overlay click
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          overlay.classList.remove('active');
          document.body.classList.remove('modal-open');
        }
      });
    });

    // ============================================
    // Inline Quiz System
    // ============================================
    let quizData = {};
    let currentSlide = 1;

    function selectQuizOpt(el, step) {
      // Remove selection from siblings
      el.parentElement.querySelectorAll('.quiz-opt').forEach(opt => opt.classList.remove('selected'));
      // Add selection to clicked
      el.classList.add('selected');
      // Store answer
      quizData['step' + step] = el.dataset.value;
      // Enable next button
      document.querySelector('.quiz-next-btn').disabled = false;
    }

    function nextQuizSlide() {
      const concern = quizData.step1;
      let nextSlide = currentSlide + 1;

      // Skip logic based on concern
      if (currentSlide === 1) {
        if (concern === 'ed') {
          nextSlide = 3; // Skip hair loss severity, go to ED severity
        } else if (concern === 'hairloss') {
          nextSlide = 2; // Go to hair loss severity
        } else {
          nextSlide = 2; // Both - go to hair loss first
        }
      }
      if (currentSlide === 2) {
        if (concern === 'hairloss') {
          nextSlide = 5; // Skip ED questions, go to experience
        } else {
          nextSlide = 3; // Both - go to ED severity
        }
      }
      if (currentSlide === 3) {
        nextSlide = 4; // ED usage preference
      }
      if (currentSlide === 4) {
        nextSlide = 5; // Experience
      }
      if (nextSlide > 5) {
        showQuizResults();
        return;
      }

      currentSlide = nextSlide;
      updateQuizSlides();
    }

    function prevQuizSlide() {
      const concern = quizData.step1;
      let prevSlide = currentSlide - 1;

      // Skip logic
      if (currentSlide === 3 && concern === 'ed') {
        prevSlide = 1;
      }
      if (currentSlide === 5 && concern === 'hairloss') {
        prevSlide = 2;
      }
      if (currentSlide === 5 && concern === 'ed') {
        prevSlide = 4;
      }

      if (prevSlide < 1) prevSlide = 1;
      currentSlide = prevSlide;
      updateQuizSlides();
    }

    function updateQuizSlides() {
      // Update slides
      document.querySelectorAll('.quiz-slide').forEach(s => s.classList.remove('active'));
      document.querySelector(`.quiz-slide[data-slide="${currentSlide}"]`).classList.add('active');

      // Update step dots
      document.querySelectorAll('.quiz-step-dot').forEach((dot, i) => {
        dot.classList.remove('active', 'completed');
        const step = i + 1;
        if (step < currentSlide) dot.classList.add('completed');
        if (step === currentSlide) dot.classList.add('active');
      });

      // Update nav buttons
      document.querySelector('.quiz-prev-btn').style.visibility = currentSlide === 1 ? 'hidden' : 'visible';
      document.querySelector('.quiz-next-btn').disabled = !quizData['step' + currentSlide];
      document.querySelector('.quiz-next-btn').textContent = currentSlide >= 5 ? 'See Results →' : 'Next →';
    }

    function showQuizResults() {
      document.querySelectorAll('.quiz-slide').forEach(s => s.classList.remove('active'));
      document.querySelector('.quiz-slide[data-slide="results"]').classList.add('active');
      document.querySelector('.quiz-nav-btns').style.display = 'none';

      // Mark all dots as completed
      document.querySelectorAll('.quiz-step-dot').forEach(dot => {
        dot.classList.remove('active');
        dot.classList.add('completed');
      });

      generateQuizResults();
    }

    function generateQuizResults() {
      const container = document.getElementById('quizResultsContainer');
      const concern = quizData.step1;
      const hairSeverity = quizData.step2;   // Hair loss severity
      const edSeverity = quizData.step3;     // ED severity
      const edUsage = quizData.step4;        // ED usage preference
      const experience = quizData.step5;     // Experience level

      let recs = [];

      // Hair loss recommendations
      if (concern === 'hairloss' || concern === 'both') {
        if (experience !== 'switch') {
          recs.push({
            icon: '💎',
            name: 'Finasteride 1mg',
            price: 25.99,
            cartName: 'Finasteride 1mg (90 pills)',
            reason: 'The gold standard for hair loss. Blocks 70% of DHT with a 90% success rate in stopping further loss. Results visible in 3-6 months.'
          });
        }
        if (hairSeverity === 'moderate' || hairSeverity === 'advanced' || experience === 'switch') {
          recs.push({
            icon: '🧴',
            name: 'Minoxidil 2.5mg',
            price: 24.99,
            cartName: 'Minoxidil 2.5mg (90 pills)',
            reason: 'Promotes new hair growth. Combined with Finasteride, 66% of men see visible regrowth. 2.5mg is the optimal starting dose.'
          });
        }
        if (experience === 'switch' || hairSeverity === 'advanced') {
          recs.push({
            icon: '💊',
            name: 'Dutasteride 0.5mg',
            price: 32.99,
            cartName: 'Dutasteride 0.5mg (90 pills)',
            reason: 'Blocks 90%+ of DHT vs Finasteride\'s 70%. 1.5x more effective for stubborn cases or when Finasteride isn\'t enough.'
          });
        }
      }

      // ED recommendations based on severity and usage
      if (concern === 'ed' || concern === 'both') {
        if (edUsage === 'daily') {
          // Daily use - recommend Tadalafil based on severity
          if (edSeverity === 'mild' || experience === 'new') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 2.5mg',
              price: 29.99,
              cartName: 'Tadalafil 2.5mg (60 pills)',
              reason: 'Perfect daily starter dose. Low side effects, always ready. Take once daily for consistent results.'
            });
          } else if (edSeverity === 'moderate') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 5mg',
              price: 39.99,
              cartName: 'Tadalafil 5mg (60 pills)',
              reason: 'Standard daily dose. 81% success rate. Take once daily and be ready 24/7 without planning.'
            });
          } else if (edSeverity === 'severe') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 5mg',
              price: 39.99,
              cartName: 'Tadalafil 5mg (60 pills)',
              reason: 'Recommended daily dose for consistent support. Can increase if needed after consultation.'
            });
          }
        } else if (edUsage === 'asneeded' || edUsage === 'weekend') {
          // As-needed - recommend based on severity
          if (edSeverity === 'mild' || experience === 'new') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 10mg',
              price: 49.99,
              cartName: 'Tadalafil 10mg (60 pills)',
              reason: 'Great starting dose for as-needed use. Lasts up to 36 hours - the famous "weekend pill".'
            });
          } else if (edSeverity === 'moderate') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 20mg',
              price: 59.99,
              cartName: 'Tadalafil 20mg (60 pills)',
              reason: 'Standard as-needed dose. Take 30 min before activity. Effects last up to 36 hours.'
            });
          } else if (edSeverity === 'severe' || experience === 'switch') {
            recs.push({
              icon: '💊',
              name: 'Tadalafil 40mg',
              price: 74.99,
              cartName: 'Tadalafil 40mg (60 pills)',
              reason: 'Higher strength for those who need more support. Powerful and long-lasting effects.'
            });
          }
          
          // Also recommend Sildenafil as alternative for as-needed
          if (edSeverity === 'mild') {
            recs.push({
              icon: '⚡',
              name: 'Sildenafil 25mg',
              price: 34.99,
              cartName: 'Sildenafil 25mg (60 pills)',
              reason: 'Fast-acting alternative. Works in 30-60 min. Great starter dose with proven 25+ year safety record.'
            });
          } else {
            recs.push({
              icon: '⚡',
              name: 'Sildenafil 50mg',
              price: 45.99,
              cartName: 'Sildenafil 50mg (60 pills)',
              reason: 'The classic that works. Take 30-60 min before activity. 84% success rate with 25+ years of proven safety.'
            });
          }
        }
      }

      // Filter out coming soon items for bundle calculation
      const availableRecs = recs.filter(r => !r.comingSoon);
      const hasBundle = availableRecs.length >= 2;
      const bundleTotal = availableRecs.reduce((sum, r) => sum + r.price, 0);
      const bundleDiscount = bundleTotal * 0.10;
      const bundlePrice = bundleTotal - bundleDiscount;

      let html = `
        <div class="quiz-results-header">
          <h3>Your Personalized Plan</h3>
          <p style="color: var(--silver);">Based on your answers, here's what we recommend:</p>
        </div>
      `;

      // Bundle offer card (if 2+ products)
      if (hasBundle) {
        html += `
          <div class="quiz-bundle-card">
            <div class="quiz-bundle-badge">BEST VALUE</div>
            <div class="quiz-bundle-header">
              <div class="quiz-bundle-title">
                <h4>Complete Bundle</h4>
                <p>All ${availableRecs.length} recommended treatments</p>
              </div>
              <div class="quiz-bundle-pricing">
                <span class="quiz-bundle-original">$${bundleTotal.toFixed(2)}</span>
                <span class="quiz-bundle-price">$${bundlePrice.toFixed(2)}</span>
                <span class="quiz-bundle-save">Save 10%</span>
              </div>
            </div>
            <div class="quiz-bundle-items">
              ${availableRecs.map(r => `<span class="quiz-bundle-item">${r.name}</span>`).join('')}
            </div>
            <button class="quiz-bundle-btn" onclick="addBundle([${availableRecs.map(r => `{name:'${r.cartName}',price:${(r.price * 0.9).toFixed(2)},icon:'${r.icon}'}`).join(',')}])">
              Add Bundle & Save $${bundleDiscount.toFixed(2)}
            </button>
            <p class="quiz-bundle-note">* 10% discount applied to 3-month supply</p>
          </div>
          <div class="quiz-divider">
            <span>or add individually</span>
          </div>
        `;
      }

      recs.forEach(rec => {
        html += `
          <div class="quiz-rec-card">
            <div class="quiz-rec-header">
              <span class="quiz-rec-icon">${rec.icon}</span>
              <div class="quiz-rec-info">
                <h4>${rec.name}</h4>
                <span>$${rec.price.toFixed(2)}/month</span>
              </div>
            </div>
            <div class="quiz-rec-reason">${rec.reason}</div>
            ${rec.comingSoon 
              ? '<button class="quiz-rec-btn" disabled style="opacity:0.5;cursor:not-allowed;">Coming Soon</button>'
              : `<button class="quiz-rec-btn" onclick="addQuizRec('${rec.cartName}', ${rec.price}, '${rec.icon}')">Add to Cart</button>`
            }
          </div>
        `;
      });

      html += '<button class="quiz-restart-btn" onclick="restartQuiz()">Start Over</button>';
      container.innerHTML = html;
    }

    function addBundle(items) {
      items.forEach(item => {
        const existing = cart.find(c => c.name === item.name);
        if (existing) {
          existing.qty++;
          existing.price = item.price; // Apply discounted price
        } else {
          cart.push({ name: item.name, price: item.price, icon: item.icon, qty: 1 });
        }
      });
      updateCartCount();
      
      // Visual feedback
      const cartBtn = document.querySelector('.cart-btn');
      cartBtn.classList.add('pulse');
      setTimeout(() => cartBtn.classList.remove('pulse'), 500);
      
      // Change button
      event.target.textContent = '✓ Bundle Added!';
      event.target.style.background = 'linear-gradient(135deg, #00c853, #00e676)';
      setTimeout(() => {
        event.target.innerHTML = 'Add Bundle & Save';
        event.target.style.background = '';
      }, 2500);
    }

    function addQuizRec(name, price, icon) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon, qty: 1 });
      }
      updateCartCount();
      
      // Visual feedback
      const cartBtn = document.querySelector('.cart-btn');
      cartBtn.classList.add('pulse');
      setTimeout(() => cartBtn.classList.remove('pulse'), 500);
      
      // Change button to show added
      event.target.textContent = '✓ Added!';
      event.target.style.background = 'var(--graphite)';
      setTimeout(() => {
        event.target.textContent = 'Add to Cart';
        event.target.style.background = '';
      }, 2000);
    }

    function restartQuiz() {
      quizData = {};
      currentSlide = 1;
      
      // Reset selections
      document.querySelectorAll('.quiz-opt').forEach(opt => opt.classList.remove('selected'));
      
      // Reset dots
      document.querySelectorAll('.quiz-step-dot').forEach((dot, i) => {
        dot.classList.remove('active', 'completed');
        if (i === 0) dot.classList.add('active');
      });
      
      // Show first slide
      document.querySelectorAll('.quiz-slide').forEach(s => s.classList.remove('active'));
      document.querySelector('.quiz-slide[data-slide="1"]').classList.add('active');
      
      // Reset nav
      document.querySelector('.quiz-nav-btns').style.display = 'flex';
      document.querySelector('.quiz-prev-btn').style.visibility = 'hidden';
      document.querySelector('.quiz-next-btn').disabled = true;
      document.querySelector('.quiz-next-btn').textContent = 'Next →';
    }

    // ============================================
    // Learn More - Smooth Scroll with Highlight
    // ============================================
    document.querySelectorAll('.learn-more-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        const target = document.getElementById(targetId);
        
        if (target) {
          // Scroll with offset
          const offset = 100;
          const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;
          
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
          
          // Add highlight effect
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 2000);
          }, 500);
        }
      });
    });

    // ============================================
    // Dive Deeper - Open Research Pages
    // ============================================
    document.querySelectorAll('.dive-deeper-link').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        const drug = this.getAttribute('data-drug');
        if (drug) {
          openDeepDive(drug);
        }
      });
    });

    // ============================================
    // Deep Dive Research Pages
    // ============================================
    const deepDiveData = {
      finasteride: {
        abbrev: 'Fin',
        name: 'Finasteride',
        subtitle: '1mg Oral Tablet — 5α-Reductase Inhibitor',
        stats: [
          { value: '90%', label: 'Stop Hair Loss' },
          { value: '66%', label: 'See Regrowth' },
          { value: '70%', label: 'DHT Reduction' },
          { value: '25+', label: 'Years of Data' }
        ],
        sections: [
          {
            title: 'How Finasteride Works',
            content: `
              <p class="deep-dive-text">Finasteride is a selective inhibitor of Type II 5α-reductase, the enzyme responsible for converting testosterone to dihydrotestosterone (DHT) in the scalp, prostate, and other tissues. DHT is the primary androgen responsible for androgenetic alopecia (male pattern hair loss).</p>
              <p class="deep-dive-text">By inhibiting this enzyme, Finasteride reduces scalp DHT levels by approximately 70%, which slows or stops the miniaturization of hair follicles. This allows weakened follicles to recover and resume normal hair production.</p>
              <div class="deep-dive-highlight">
                <p><strong>Key Mechanism:</strong> Finasteride specifically targets the Type II isoenzyme, which is predominantly found in hair follicles. This selectivity means it effectively treats hair loss while minimizing systemic effects.</p>
              </div>
            `
          },
          {
            title: 'Clinical Evidence',
            content: `
              <p class="deep-dive-text">Finasteride has been extensively studied in multiple large-scale clinical trials, making it one of the most well-documented treatments for male pattern hair loss.</p>
              <ul class="deep-dive-list">
                <li><strong>5-Year Pivotal Study (n=1,553):</strong> 90% of men taking Finasteride maintained or increased hair count compared to baseline, while 100% of placebo patients lost hair.</li>
                <li><strong>Hair Count Analysis:</strong> Men on Finasteride showed an average increase of 277 hairs in a 1-inch diameter circle at 5 years, compared to a loss of 139 hairs in the placebo group.</li>
                <li><strong>Patient Self-Assessment:</strong> 65% of men rated their hair growth as improved after 2 years of treatment.</li>
                <li><strong>Photographic Assessment:</strong> Independent dermatologists rated 48% of men as having visible hair regrowth at 1 year.</li>
              </ul>
              <div class="deep-dive-comparison">
                <h4>Finasteride vs Placebo — 5 Year Study Results</h4>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Hair Maintained/Increased (Finasteride)</span>
                    <span>90%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 90%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Hair Maintained/Increased (Placebo)</span>
                    <span>0%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 0%"></div>
                  </div>
                </div>
              </div>
            `
          },
          {
            title: 'Optimal Usage & Timing',
            content: `
              <p class="deep-dive-text">For best results, Finasteride should be taken consistently at the same time each day. The medication can be taken with or without food.</p>
              <ul class="deep-dive-list">
                <li><strong>Standard Dose:</strong> 1mg once daily</li>
                <li><strong>Initial Results:</strong> 3-6 months for slowing of hair loss</li>
                <li><strong>Visible Regrowth:</strong> 6-12 months for most patients</li>
                <li><strong>Maximum Benefit:</strong> 1-2 years of continuous use</li>
                <li><strong>Maintenance:</strong> Continued use required to maintain results</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Important:</strong> Finasteride is most effective when started early in the hair loss process. Men with extensive hair loss may see less dramatic results, though the medication will still help prevent further progression.</p>
              </div>
            `
          },
          {
            title: 'Safety Profile',
            content: `
              <p class="deep-dive-text">Finasteride has been used by millions of men worldwide since its FDA approval in 1997. The safety profile is well-established through decades of clinical use and post-marketing surveillance.</p>
              <p class="deep-dive-text">In clinical trials, the incidence of side effects was low and similar between treatment and placebo groups. The most commonly reported side effects (occurring in less than 2% of patients) include:</p>
              <ul class="deep-dive-list">
                <li>Decreased libido (1.8% vs 1.3% placebo)</li>
                <li>Erectile dysfunction (1.3% vs 0.7% placebo)</li>
                <li>Decreased ejaculate volume (0.8% vs 0.4% placebo)</li>
              </ul>
              <p class="deep-dive-text">These side effects resolved in men who discontinued therapy and in 58% of men who continued treatment. The Prostate Cancer Prevention Trial, involving over 18,000 men followed for 7 years, confirmed the long-term safety of 5α-reductase inhibitors.</p>
            `
          }
        ],
        sources: [
          { title: 'Long-term (5-year) multinational experience with finasteride 1 mg in the treatment of men with androgenetic alopecia', journal: 'European Journal of Dermatology, 2002', url: 'https://pubmed.ncbi.nlm.nih.gov/12120256/' },
          { title: 'Finasteride in the treatment of men with androgenetic alopecia', journal: 'Journal of the American Academy of Dermatology, 1998', url: 'https://pubmed.ncbi.nlm.nih.gov/9777765/' },
          { title: 'The Prostate Cancer Prevention Trial', journal: 'New England Journal of Medicine, 2003', url: 'https://pubmed.ncbi.nlm.nih.gov/12824459/' }
        ],
        cartName: 'Finasteride 1mg (90 pills)',
        cartPrice: 25.99,
        cartIcon: '💎'
      },
      minoxidil: {
        abbrev: 'Min',
        name: 'Minoxidil',
        subtitle: '2.5mg Oral Tablet — Vasodilator',
        stats: [
          { value: '3x', label: 'vs Topical' },
          { value: '66%', label: 'See Regrowth' },
          { value: '2.5mg', label: 'Optimal Dose' },
          { value: '94%', label: 'With Combo' }
        ],
        sections: [
          {
            title: 'How Oral Minoxidil Works',
            content: `
              <p class="deep-dive-text">Minoxidil was originally developed as an oral antihypertensive medication. Its hair growth properties were discovered as a side effect, leading to the development of topical formulations. However, oral minoxidil provides superior bioavailability and more consistent results.</p>
              <p class="deep-dive-text">The exact mechanism for hair growth is not fully understood, but minoxidil is believed to work through multiple pathways:</p>
              <ul class="deep-dive-list">
                <li><strong>Vasodilation:</strong> Opens potassium channels in vascular smooth muscle, increasing blood flow to hair follicles</li>
                <li><strong>Growth Factor Stimulation:</strong> Upregulates vascular endothelial growth factor (VEGF) and promotes angiogenesis around follicles</li>
                <li><strong>Prolonged Anagen Phase:</strong> Extends the active growth phase of hair, resulting in longer, thicker strands</li>
                <li><strong>Follicle Enlargement:</strong> Transforms vellus (fine) hairs into terminal (thick) hairs</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Why Oral Over Topical?</strong> Oral minoxidil achieves consistent systemic levels, eliminating the variability of topical application. Studies show it's approximately 3x more effective than topical formulations.</p>
              </div>
            `
          },
          {
            title: 'Clinical Evidence',
            content: `
              <p class="deep-dive-text">Multiple studies have demonstrated the superior efficacy of low-dose oral minoxidil compared to topical formulations for hair loss treatment.</p>
              <ul class="deep-dive-list">
                <li><strong>2020 Systematic Review:</strong> Oral minoxidil at 2.5-5mg daily showed significantly greater improvement in hair density compared to topical 5% solution.</li>
                <li><strong>Combination Therapy Study:</strong> When combined with Finasteride, 66% of men experienced visible regrowth vs 41% with Finasteride alone.</li>
                <li><strong>Dose-Response Analysis:</strong> 2.5mg daily showed 85% of the efficacy of 5mg with fewer side effects.</li>
                <li><strong>Treatment-Resistant Cases:</strong> 73% of men who failed topical minoxidil showed improvement with oral formulation.</li>
              </ul>
              <div class="deep-dive-comparison">
                <h4>Oral vs Topical Minoxidil Effectiveness</h4>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Oral Minoxidil 2.5mg</span>
                    <span>85%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 85%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Topical Minoxidil 5%</span>
                    <span>62%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 62%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Oral + Finasteride Combo</span>
                    <span>94%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 94%"></div>
                  </div>
                </div>
              </div>
            `
          },
          {
            title: 'Dosing Recommendations',
            content: `
              <p class="deep-dive-text">The optimal dose of oral minoxidil for hair loss has been established through multiple clinical studies. We recommend starting with the lower dose to assess tolerance.</p>
              <ul class="deep-dive-list">
                <li><strong>Starting Dose:</strong> 2.5mg once daily</li>
                <li><strong>Maximum Dose:</strong> 5mg once daily (if needed and tolerated)</li>
                <li><strong>Initial Shedding:</strong> Normal during first 2-8 weeks as follicles reset</li>
                <li><strong>Visible Results:</strong> 4-6 months for noticeable improvement</li>
                <li><strong>Best Results:</strong> When combined with a DHT blocker (Finasteride/Dutasteride)</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Our Recommendation:</strong> 2.5mg is the sweet spot for most men — it provides 85% of the benefit of the higher 5mg dose while minimizing the risk of side effects like fluid retention or low blood pressure.</p>
              </div>
            `
          }
        ],
        sources: [
          { title: 'Oral minoxidil for hair loss: A review', journal: 'Dermatologic Therapy, 2020', url: 'https://pubmed.ncbi.nlm.nih.gov/32557817/' },
          { title: 'Low-dose oral minoxidil for androgenetic alopecia', journal: 'Journal of the American Academy of Dermatology, 2021', url: 'https://pubmed.ncbi.nlm.nih.gov/33157169/' },
          { title: 'Combination therapy for pattern hair loss', journal: 'International Journal of Dermatology, 2019', url: 'https://pubmed.ncbi.nlm.nih.gov/30761528/' }
        ],
        cartName: 'Minoxidil 2.5mg (90 pills)',
        cartPrice: 24.99,
        cartIcon: '🧴'
      },
      dutasteride: {
        abbrev: 'Dut',
        name: 'Dutasteride',
        subtitle: '0.5mg Capsule — Dual 5α-Reductase Inhibitor',
        stats: [
          { value: '90%+', label: 'DHT Blocked' },
          { value: '1.5x', label: 'vs Finasteride' },
          { value: '95%', label: 'Stop Loss' },
          { value: 'Both', label: 'Type I & II' }
        ],
        sections: [
          {
            title: 'How Dutasteride Works',
            content: `
              <p class="deep-dive-text">Dutasteride is a dual 5α-reductase inhibitor, blocking both Type I and Type II isoenzymes. This is the key difference from Finasteride, which only blocks Type II. By inhibiting both enzymes, Dutasteride achieves more complete DHT suppression.</p>
              <ul class="deep-dive-list">
                <li><strong>Type I Enzyme:</strong> Found in sebaceous glands and some hair follicles — blocked by Dutasteride only</li>
                <li><strong>Type II Enzyme:</strong> Primary enzyme in hair follicles — blocked by both Dutasteride and Finasteride</li>
                <li><strong>DHT Reduction:</strong> Dutasteride reduces serum DHT by >90% vs ~70% with Finasteride</li>
                <li><strong>Scalp DHT:</strong> Studies show 51% greater reduction in scalp DHT compared to Finasteride</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Why Choose Dutasteride?</strong> For men who haven't achieved desired results with Finasteride, or those with aggressive hair loss, Dutasteride's more complete DHT blockade often produces superior outcomes.</p>
              </div>
            `
          },
          {
            title: 'Clinical Evidence',
            content: `
              <p class="deep-dive-text">Head-to-head studies comparing Dutasteride and Finasteride have consistently shown superior efficacy for Dutasteride in treating androgenetic alopecia.</p>
              <ul class="deep-dive-list">
                <li><strong>ARIA Study (n=917):</strong> Dutasteride 0.5mg showed 1.5x greater hair count improvement vs Finasteride 1mg at 24 weeks.</li>
                <li><strong>Target Area Hair Count:</strong> Dutasteride increased hair count by 109.6 hairs/inch² vs 75.6 for Finasteride.</li>
                <li><strong>Patient Satisfaction:</strong> 38% more patients rated their improvement as "greatly improved" with Dutasteride.</li>
                <li><strong>Vertex Hair Loss:</strong> Particularly effective for crown/vertex hair loss patterns.</li>
              </ul>
              <div class="deep-dive-comparison">
                <h4>Dutasteride vs Finasteride — DHT Blocking Power</h4>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Dutasteride 0.5mg</span>
                    <span>93%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 93%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Finasteride 1mg</span>
                    <span>70%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 70%"></div>
                  </div>
                </div>
              </div>
            `
          },
          {
            title: 'When to Consider Dutasteride',
            content: `
              <p class="deep-dive-text">Dutasteride is particularly recommended in the following scenarios:</p>
              <ul class="deep-dive-list">
                <li><strong>Finasteride Non-Responders:</strong> Men who have used Finasteride for 12+ months without satisfactory results</li>
                <li><strong>Aggressive Hair Loss:</strong> Rapid progression or significant loss at a young age</li>
                <li><strong>Vertex (Crown) Pattern:</strong> Dutasteride shows superior efficacy for crown hair loss</li>
                <li><strong>Family History:</strong> Strong genetic predisposition to severe baldness</li>
                <li><strong>Initial Treatment:</strong> Some dermatologists now recommend starting with Dutasteride for aggressive cases</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Note:</strong> Dutasteride has a longer half-life (5 weeks vs 6-8 hours for Finasteride), meaning it takes longer to clear the system. This is important to consider if planning to discontinue treatment.</p>
              </div>
            `
          }
        ],
        sources: [
          { title: 'The importance of dual 5α-reductase inhibition in hair loss', journal: 'Journal of the American Academy of Dermatology, 2006', url: 'https://pubmed.ncbi.nlm.nih.gov/17110217/' },
          { title: 'Dutasteride vs Finasteride: A comparative study (ARIA)', journal: 'Journal of Dermatological Treatment, 2014', url: 'https://pubmed.ncbi.nlm.nih.gov/24548150/' },
          { title: 'Long-term efficacy of dutasteride for male pattern hair loss', journal: 'BJU International, 2010', url: 'https://pubmed.ncbi.nlm.nih.gov/19751374/' }
        ],
        cartName: 'Dutasteride 0.5mg (30 pills)',
        cartPrice: 39.99,
        cartIcon: '🔬',
        comingSoon: true
      },
      tadalafil: {
        abbrev: 'Tad',
        name: 'Tadalafil',
        subtitle: '5mg Daily — PDE5 Inhibitor',
        stats: [
          { value: '81%', label: 'Success Rate' },
          { value: '36hrs', label: 'Duration' },
          { value: '24/7', label: 'Ready' },
          { value: 'FDA', label: 'Approved' }
        ],
        sections: [
          {
            title: 'How Tadalafil Works',
            content: `
              <p class="deep-dive-text">Tadalafil belongs to a class of medications called PDE5 inhibitors (phosphodiesterase type 5). It works by enhancing the natural erectile response to sexual stimulation.</p>
              <p class="deep-dive-text">During sexual arousal, nitric oxide is released in the penis, which activates the enzyme guanylate cyclase. This leads to increased levels of cyclic guanosine monophosphate (cGMP), causing smooth muscle relaxation and blood flow into the penis.</p>
              <ul class="deep-dive-list">
                <li><strong>PDE5 Inhibition:</strong> Tadalafil blocks the enzyme that breaks down cGMP, allowing it to accumulate and enhance erection</li>
                <li><strong>Extended Half-Life:</strong> Unlike other PDE5 inhibitors, Tadalafil has a 17.5-hour half-life, providing effects for up to 36 hours</li>
                <li><strong>Daily Dosing:</strong> 5mg daily maintains steady blood levels for continuous readiness</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>The "Weekend Pill":</strong> Tadalafil's long duration of action earned it this nickname. A single dose can provide erectile support from Friday evening through Sunday, allowing for natural spontaneity.</p>
              </div>
            `
          },
          {
            title: 'Clinical Evidence',
            content: `
              <p class="deep-dive-text">Tadalafil has been extensively studied in clinical trials involving thousands of men with erectile dysfunction of various causes and severities.</p>
              <ul class="deep-dive-list">
                <li><strong>IIEF Improvement:</strong> Clinical trials showed 81% of men achieved successful intercourse vs 35% on placebo.</li>
                <li><strong>Daily Dosing Study:</strong> 67% of men on Tadalafil 5mg daily reported "normal" erectile function (IIEF-EF domain score ≥26).</li>
                <li><strong>Rapid Onset:</strong> Effects can be seen as early as 16 minutes after dosing in some patients.</li>
                <li><strong>Diabetes Patients:</strong> 64% success rate in men with diabetes, a population typically harder to treat.</li>
                <li><strong>Post-Prostatectomy:</strong> Effective in 71% of men following nerve-sparing prostate surgery.</li>
              </ul>
              <div class="deep-dive-comparison">
                <h4>Tadalafil Daily vs As-Needed</h4>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Spontaneity (Daily)</span>
                    <span>95%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 95%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Partner Satisfaction</span>
                    <span>88%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 88%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Overall Success Rate</span>
                    <span>81%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 81%"></div>
                  </div>
                </div>
              </div>
            `
          },
          {
            title: 'Additional Benefits',
            content: `
              <p class="deep-dive-text">Beyond erectile dysfunction, daily Tadalafil 5mg has been FDA-approved for additional conditions:</p>
              <ul class="deep-dive-list">
                <li><strong>BPH Symptoms:</strong> Improves urinary symptoms in men with benign prostatic hyperplasia</li>
                <li><strong>Combined ED/BPH:</strong> The only PDE5 inhibitor approved to treat both conditions simultaneously</li>
                <li><strong>Pulmonary Arterial Hypertension:</strong> Higher doses used for this cardiovascular condition</li>
                <li><strong>Exercise Capacity:</strong> Some studies suggest improved exercise tolerance</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Lifestyle Benefit:</strong> Men on daily Tadalafil report reduced performance anxiety since they don't need to "plan" intimacy. The medication is always working in the background, allowing for natural, spontaneous encounters.</p>
              </div>
            `
          }
        ],
        sources: [
          { title: 'Efficacy and safety of tadalafil for ED', journal: 'Journal of Sexual Medicine, 2004', url: 'https://pubmed.ncbi.nlm.nih.gov/16422983/' },
          { title: 'Once-daily tadalafil for erectile dysfunction', journal: 'European Urology, 2007', url: 'https://pubmed.ncbi.nlm.nih.gov/17306921/' },
          { title: 'Tadalafil for BPH and ED: A systematic review', journal: 'BJU International, 2013', url: 'https://pubmed.ncbi.nlm.nih.gov/23795947/' }
        ],
        cartName: 'Tadalafil 5mg (30 pills)',
        cartPrice: 40.99,
        cartIcon: '💊'
      },
      sildenafil: {
        abbrev: 'Sil',
        name: 'Sildenafil',
        subtitle: '25-50mg As Needed — The Original PDE5 Inhibitor',
        stats: [
          { value: '84%', label: 'Success Rate' },
          { value: '30min', label: 'Onset' },
          { value: '4-6hrs', label: 'Duration' },
          { value: '25yrs', label: 'Track Record' }
        ],
        sections: [
          {
            title: 'How Sildenafil Works',
            content: `
              <p class="deep-dive-text">Sildenafil (Viagra) was the first PDE5 inhibitor approved for erectile dysfunction, revolutionizing the treatment of ED when it launched in 1998. It works through the same mechanism as other PDE5 inhibitors but with different pharmacokinetic properties.</p>
              <ul class="deep-dive-list">
                <li><strong>Mechanism:</strong> Inhibits PDE5, the enzyme that breaks down cGMP, allowing enhanced blood flow during arousal</li>
                <li><strong>Onset:</strong> Works within 30-60 minutes of taking the dose</li>
                <li><strong>Duration:</strong> Effects last 4-6 hours, ideal for planned intimacy</li>
                <li><strong>Food Interaction:</strong> High-fat meals can delay absorption; best taken on empty stomach</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>The Pioneer:</strong> Sildenafil's accidental discovery during a clinical trial for angina in 1989 changed medicine forever. Male participants reported improved erections as a side effect, leading Pfizer to pivot the drug's development toward ED treatment.</p>
              </div>
            `
          },
          {
            title: 'Clinical Evidence',
            content: `
              <p class="deep-dive-text">With over 25 years of clinical use and data from over 130 clinical trials, Sildenafil has the most extensive evidence base of any ED medication.</p>
              <ul class="deep-dive-list">
                <li><strong>Meta-Analysis of 130 Trials:</strong> 84% of men achieved erections sufficient for intercourse.</li>
                <li><strong>First-Attempt Success:</strong> 74% success rate on the very first dose.</li>
                <li><strong>All Severities:</strong> Effective in mild (89%), moderate (81%), and severe (67%) ED.</li>
                <li><strong>All Ages:</strong> Similar efficacy in men under 65 and those over 65 years old.</li>
                <li><strong>Various Etiologies:</strong> Effective regardless of ED cause — diabetes, hypertension, psychological factors, or post-surgery.</li>
              </ul>
              <div class="deep-dive-comparison">
                <h4>Sildenafil Efficacy by ED Severity</h4>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Mild ED</span>
                    <span>89%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 89%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Moderate ED</span>
                    <span>81%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 81%"></div>
                  </div>
                </div>
                <div class="deep-dive-bar">
                  <div class="deep-dive-bar-header">
                    <span>Severe ED</span>
                    <span>67%</span>
                  </div>
                  <div class="deep-dive-bar-track">
                    <div class="deep-dive-bar-fill" style="width: 67%"></div>
                  </div>
                </div>
              </div>
            `
          },
          {
            title: 'Dosing Guidelines',
            content: `
              <p class="deep-dive-text">Sildenafil comes in 25mg, 50mg, and 100mg tablets. The optimal dose varies by individual response and tolerability.</p>
              <ul class="deep-dive-list">
                <li><strong>Starting Dose:</strong> 50mg taken approximately 1 hour before sexual activity</li>
                <li><strong>Dose Range:</strong> Can be decreased to 25mg or increased to 100mg based on efficacy and tolerability</li>
                <li><strong>Maximum Frequency:</strong> Once per day</li>
                <li><strong>Timing:</strong> Works best on an empty stomach or after a light meal</li>
                <li><strong>Age Adjustment:</strong> Men over 65 or with kidney/liver issues may start at 25mg</li>
              </ul>
              <div class="deep-dive-highlight">
                <p><strong>Pro Tip:</strong> For best results, take Sildenafil on an empty stomach and allow 30-60 minutes before activity. Sexual stimulation is still required — the medication enhances the natural response, it doesn't create an automatic erection.</p>
              </div>
            `
          }
        ],
        sources: [
          { title: 'Sildenafil citrate for erectile dysfunction: A systematic review', journal: 'New England Journal of Medicine, 1998', url: 'https://pubmed.ncbi.nlm.nih.gov/9614956/' },
          { title: 'Long-term safety and efficacy of sildenafil', journal: 'International Journal of Impotence Research, 2002', url: 'https://pubmed.ncbi.nlm.nih.gov/12152112/' },
          { title: 'Meta-analysis of sildenafil for ED treatment', journal: 'International Journal of Impotence Research, 2007', url: 'https://pubmed.ncbi.nlm.nih.gov/17568760/' }
        ],
        cartName: 'Sildenafil 50mg (60 pills)',
        cartPrice: 45.99,
        cartIcon: '⚡'
      }
    };

    function openDeepDive(drug) {
      const data = deepDiveData[drug];
      if (!data) return;

      let html = `
        <div class="deep-dive-header">
          <div class="deep-dive-title">
            <div class="deep-dive-icon">${data.abbrev}</div>
            <div>
              <h1>${data.name}</h1>
              <p>${data.subtitle}</p>
            </div>
          </div>
          <button class="deep-dive-close" onclick="closeDeepDive()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <div class="deep-dive-stats">
          ${data.stats.map(s => `
            <div class="deep-dive-stat">
              <div class="deep-dive-stat-value">${s.value}</div>
              <div class="deep-dive-stat-label">${s.label}</div>
            </div>
          `).join('')}
        </div>

        ${data.sections.map(s => `
          <div class="deep-dive-section">
            <h2 class="deep-dive-section-title">${s.title}</h2>
            ${s.content}
          </div>
        `).join('')}

        <div class="deep-dive-sources">
          <h4>📚 Scientific Sources</h4>
          ${data.sources.map(s => `
            <div class="deep-dive-source-item">
              <a href="${s.url}" target="_blank" rel="noopener">${s.title}</a>
              <span>${s.journal}</span>
            </div>
          `).join('')}
        </div>

        <div class="deep-dive-cta">
          <button class="btn-secondary" onclick="closeDeepDive()">← Back to Research</button>
          ${data.comingSoon 
            ? '<button class="btn-primary" disabled style="opacity:0.5;cursor:not-allowed;">Coming Soon</button>'
            : `<button class="btn-primary" onclick="addFromDeepDive('${data.cartName}', ${data.cartPrice}, '${data.cartIcon}')">Add ${data.name} to Cart — $${data.cartPrice.toFixed(2)}</button>`
          }
        </div>
      `;

      document.getElementById('deepDiveContent').innerHTML = html;
      document.getElementById('deepDiveOverlay').classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Scroll to top of overlay
      document.getElementById('deepDiveOverlay').scrollTop = 0;
    }

    function closeDeepDive() {
      document.getElementById('deepDiveOverlay').classList.remove('active');
      document.body.style.overflow = '';
    }

    function addFromDeepDive(name, price, icon) {
      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.qty++;
      } else {
        cart.push({ name, price, icon, qty: 1 });
      }
      updateCartCount();
      
      // Visual feedback
      const btn = event.target;
      btn.textContent = '✓ Added to Cart!';
      btn.style.background = 'linear-gradient(135deg, #00c853, #00e676)';
      
      setTimeout(() => {
        closeDeepDive();
      }, 1000);
    }
  </script>
</body>
</html>